# æ–‡æ¡£è¯´æ˜

æœ¬æ–‡æ¡£ä¸»è¦å‰ç«¯å¼€å‘ç›¸å…³å†…å®¹ã€‚æ–‡æ¡£ç›®å‰è¿˜åœ¨æŒç»­æ›´æ–°ä¸­ï¼Œæ¬¢è¿å…³æ³¨ã€æ”¶è—ã€ç‚¹èµã€åŠ æ˜Ÿå–”ğŸ˜„O(âˆ©_âˆ©)O~ã€‚

| æ–‡æ¡£åç§°     | å­¦ä¹ ç¬”è®°-å‰ç«¯ |
| ------------ | ------------- |
| æ–‡æ¡£åˆ†ç±»     | å­¦ä¹ ç¬”è®°-Java |
| ç‰ˆæœ¬å·       | 1.1           |
| æœ€åæ›´æ–°äºº   | Gem Shen      |
| æœ€åæ›´æ–°æ—¥æœŸ | 2023-12-19    |
| ç¼–åˆ¶äºº       | Gem Shen      |
| ç¼–åˆ¶æ—¥æœŸ     | 2023-02-18    |




# æ–‡æ¡£æ›´æ–°è®°å½•

| ç‰ˆæœ¬ | ç¼–åˆ¶/ä¿®æ”¹äºº | ä¿®æ”¹æ—¥æœŸ   | å¤‡æ³¨ï¼ˆåŸå› ã€è¿›ä¸€æ­¥çš„è¯´æ˜ç­‰ï¼‰ |
| ---- | ----------- | ---------- | ---------------------------- |
| 1.0  | Gem Shen    | 2023-02-18 | åˆç¨¿                         |
| 1.1  | Gem Shen    | 2023-12-19 | åŠ å…¥TypeScriptç›¸å…³å†…å®¹       |
|      |             |            |                              |
|      |             |            |                              |
|      |             |            |                              |
|      |             |            |                              |
|      |             |            |                              |



# å‰ç«¯å…¬å…±

## åç«¯ä¸ºä»€ä¹ˆè¦äº†è§£å‰ç«¯ï¼Ÿ

ä½œä¸ºåç«¯å·¥ç¨‹å¸ˆï¼Œæ˜¯å¦æ²¡æœ‰å¿…è¦äº†è§£å‰ç«¯çš„å¼€å‘æŠ€æœ¯äº†ï¼Ÿå¹¶ä¸æ˜¯ã€‚

å½“ä½ å’Œå‰ç«¯è¿›è¡Œè”è°ƒï¼Œæˆ–æ˜¯çº¿ä¸Šé‡åˆ°é—®é¢˜çš„æ—¶å€™ï¼Œæ‡‚ä¸€äº›å‰ç«¯å¯ä»¥å¸®åŠ©ä½ ä»¬æ›´å¿«å®šä½åˆ°é—®é¢˜ï¼Œå‡å°‘æ²Ÿé€šæˆæœ¬ã€‚

å½“ä½ æˆä¸ºç®¡ç†å±‚çš„æ—¶å€™ï¼Œæ‡‚å¾—å‰ç«¯æŠ€æœ¯æ‰èƒ½æ›´å¥½åœ°ç®¡ç†å„ä¸ªç»†åˆ†é¢†åŸŸçš„æŠ€æœ¯äººã€‚

å½“ä½ æˆä¸ºæ¶æ„å¸ˆçš„æ—¶å€™ï¼Œæ›´éœ€è¦æå‡è‡ªèº«æŠ€æœ¯å¹¿åº¦ï¼Œè€Œä¸ä»…ä»…æ˜¯æ·±åº¦ã€‚



## æ¶æ„æ¼”è¿›

### æ— æ¶æ„

åœ¨æœ€å¼€å§‹ï¼Œå‰ç«¯å¹¶æ²¡æœ‰ä»€ä¹ˆæ¶æ„ï¼Œéƒ½æ˜¯ä¸€äº›htmlå’ŒjsåµŒå…¥åœ¨åç«¯çš„åŠ¨æ€é¡µé¢ä¸­æ‰§è¡Œã€‚ä¾‹å¦‚ï¼šServlet

```mermaid
flowchart LR
subgraph åç«¯
	front["Html/js"]
end
```

### MVCæ¶æ„

ç„¶åï¼Œåç«¯å‡ºç°äº†MVCæ¶æ„ï¼Œå°†è§†å›¾å±‚ï¼Œæ§åˆ¶å±‚ï¼Œæ•°æ®å±‚åˆ†ç¦»äº†ã€‚è¿™ä¸ªæ¶æ„çš„ç¼ºç‚¹æ˜¯éå¸¸ä¾èµ–å¼€å‘ç¯å¢ƒï¼Œå‰ç«¯è¦è°ƒæ•´ä¸€ä¸ªç•Œé¢é—®é¢˜ï¼Œéœ€è¦æœ¬åœ°æ­å»ºå¥½åç«¯çš„å¼€å‘ç¯å¢ƒã€‚



### å¤šé¡µé¢æ¶æ„

æ¥ç€ï¼Œå‰åç«¯åˆ†ç¦»æ¶æ„å‡ºç°äº†ï¼Œå‰ç«¯ä»£ç ä»åç«¯ä»£ç ä¸­ç‹¬ç«‹äº†å‡ºæ¥ã€‚è¿™ä¸€åˆ‡è¿˜è¦å¾—ç›ŠäºajaxæŠ€æœ¯çš„å‘å±•ã€‚ä½†æ˜¯è¿™ç§æ–¹å¼è¿˜æ˜¯å­˜åœ¨ç¼ºç‚¹ï¼Œå‰ç«¯ç¼ºä¹ç‹¬ç«‹éƒ¨ç½²çš„èƒ½åŠ›ï¼Œæ•´ä½“ä¾èµ–åç«¯ç¯å¢ƒã€‚

```mermaid
stateDiagram
    å‰ç«¯ --> åç«¯: AJAX
    åç«¯ --> å‰ç«¯: JSON
```

### å•é¡µé¢æ¶æ„

nodejsçš„å‡ºç°è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå®ƒå…·å¤‡å„ç§æ‰“åŒ…æ„å»ºå·¥å…·ï¼ŒåŒæ—¶è¿˜ç»™å‰ç«¯å¸¦æ¥äº†å¤šå…ƒåŒ–çš„å¼€å‘æ–¹å¼ã€‚å‡ºç°äº†å•é¡µé¢æ¶æ„ã€‚

- æ‰“åŒ…ï¼šgulpã€webpackã€vite ...
- æ¡†æ¶ï¼švueã€reactã€angular ...
- UIåº“ï¼šAntd / Element UI / iview ...

ä¼˜åŠ¿

åˆ‡æ¢é¡µé¢æ— åˆ·æ–°æµè§ˆå™¨ï¼Œç”¨æˆ·ä½“éªŒå¥½

ç»„ä»¶åŒ–çš„å¼€å‘æ–¹å¼ï¼Œæå¤§çš„æé«˜äº†ä»£ç çš„å¤ç”¨ç‡

![image-20231219180758624](å­¦ä¹ ç¬”è®°-å‰ç«¯-Gem.assets/image-20231219180758624.png)

å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ¯ä¸ªé¡µé¢éƒ½ä¼šåŒ…å«ä¸€äº›å…¬å…±éƒ¨åˆ†ï¼Œè¿™äº›å…¬å…±éƒ¨åˆ†å°±å¯ä»¥å®ç°ç»„ä»¶åŒ–ï¼ˆä»¥å‰æ›´å¤šæ˜¯ç”¨åç«¯æŠ€æœ¯å®ç°çš„ï¼‰ï¼Œæ¯æ¬¡åªéœ€è¦åŠ è½½ä¸åŒçš„éƒ¨åˆ†ï¼ˆå¦‚ä¸Šå›¾ä¸­çš„A1å’ŒAï¼ŒB1å’ŒBï¼‰

è¿™ç§æ¶æ„çš„ç¼ºç‚¹æ˜¯ï¼šä¸åˆ©äºseo ï¼Œé¦–æ¬¡æ¸²æŸ“ä¼šå‡ºç°è¾ƒé•¿æ—¶é—´çš„ç™½å± (å¯è§£å†³)ã€‚ä¸åˆ©äºSEOæ˜¯å› ä¸ºç•Œé¢éƒ¨åˆ†å¾ˆå¤šéƒ½æ˜¯JSåŠ¨æ€ç”Ÿæˆçš„ï¼Œè¿˜æœ‰å°±æ˜¯æ¯ä¸ªç•Œé¢åœ¨é¦–æ¬¡æ˜¾ç¤ºæ—¶éœ€è¦CPUçš„å¯†é›†è®¡ç®—ã€‚

è¿™ç§æ¶æ„ä¸‹è¿˜æ˜¯æœ‰å¾ˆå¤šå·¥ä½œéœ€è¦åç«¯æ¥å®Œæˆï¼Œæ¯”å¦‚è¿æ•°æ®åº“è¯»å–æ•°æ®ã€‚

### å¤§å‰ç«¯æ—¶ä»£

åˆ°è¿™ä¸ªé˜¶æ®µï¼Œè¯ç”Ÿäº†ä¸€äº›æœåŠ¡ç«¯å¼€å‘æ¡†æ¶ï¼Œå‰ç«¯å·²ç»ä¸å†å±€é™äºç•Œé¢æ˜¾ç¤º

åç«¯æ¡†æ¶ express koa ...

åŒ…ç®¡ç†å·¥å…· npm yarn

node ç‰ˆæœ¬ç®¡ç†å·¥å…· nvm

å¼Šç«¯

è¿‡äºçµæ´»çš„å®ç°å¯¼è‡´äº†å‰ç«¯åº”ç”¨æ‹†åˆ†è¿‡å¤šï¼Œç»´æŠ¤å›°éš¾

å¾€å¾€ä¸€ä¸ªåŠŸèƒ½æˆ–éœ€æ±‚ä¼šè·¨ä¸¤ä¸‰ä¸ªé¡¹ç›®è¿›è¡Œå¼€å‘

### å¾®å‰ç«¯æ¶æ„

![image-20231219203742633](å­¦ä¹ ç¬”è®°-å‰ç«¯-Gem.assets/image-20231219203742633.png)

ä¸æŠ€æœ¯æ ˆæ— å…³ï¼Œæ‹†åˆ†ä¹‹åçš„æ¯ä¸ªæ¨¡å—éƒ½å¯ä»¥ä½¿ç”¨è‡ªå·±çš„æŠ€æœ¯ï¼Œä¾‹å¦‚ï¼švueï¼Œreactï¼ŒJQueryç­‰ç­‰ã€‚

ä¸»æ¡†æ¶ä¸é™åˆ¶æ¥å…¥åº”ç”¨çš„æŠ€æœ¯æ ˆï¼Œå¾®åº”ç”¨å…·å¤‡å®Œå…¨çš„è‡ªä¸»æƒ

ç‹¬ç«‹å¼€å‘ ç‹¬ç«‹éƒ¨ç½²

å¢é‡æ›´æ–°ï¼Œåªéœ€è¦æ›´æ–°æ”¹åŠ¨çš„åº”ç”¨ï¼Œå…¶ä»–åº”ç”¨ä¸å—å½±å“ã€‚æ¯ä¸ªåº”ç”¨éƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„æ²™ç®±ç¯å¢ƒ

å¾®åº”ç”¨ä»“åº“ç‹¬ç«‹ï¼Œå‰åç«¯å¯ç‹¬ç«‹å¼€å‘ï¼Œä¸»æ¡†æ¶è‡ªåŠ¨å®ŒæˆåŒæ­¥æ›´æ–°æ¯ä¸ªå¾®åº”ç”¨ä¹‹å‰çš„çŠ¶æ€éš”ç¦»ï¼Œè¿è¡Œæ—¶çŠ¶æ€ä¸å…±äº«



# TypeScript

å¼€å§‹ä¹‹å‰è¯·å…ˆè‡ªè¡Œå®‰è£…å¥½nodejsï¼ˆ[ä¸‹è½½åœ°å€](https://nodejs.org/en/download/)ï¼‰ã€‚IDEä»»é€‰ï¼šHBuilderï¼ŒVscodeï¼ŒIDEAéƒ½å¯ä»¥

## å·¥å…·æ’ä»¶

### å®‰è£…é…ç½®

åœ¨æœ¬åœ°æ–°å»ºä¸€ä¸ªç›®å½•ts-oneï¼Œç„¶åè¿›å…¥å‘½ä»¤è¡Œç•Œé¢ï¼Œæ‰§è¡Œnpm init -y

æ‰§è¡ŒæˆåŠŸä¼šåœ¨æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ªpackage.json

```json
{
  "name": "ts-one",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC"
}

```



#### Typescriptå®‰è£…

æ²¡æœ‰å®‰è£…è¿‡typescriptçš„æ‰§è¡Œè¿™ä¸ªå‘½ä»¤å®‰è£…ï¼š npm i typescript -g

å¯ä»¥ä½¿ç”¨è¿™ä¸ªå‘½ä»¤æŸ¥çœ‹typescriptæ˜¯å¦å·²ç»å®‰è£…æˆåŠŸï¼štsc -h

å¦‚æœæŠ¥å¦‚ä¸‹çš„é”™è¯¯ï¼š

>  tsc : æ— æ³•åŠ è½½æ–‡ä»¶ C:\Users\Administrator\AppData\Roaming\npm\tsc.ps1ï¼Œå› ä¸ºåœ¨æ­¤ç³»ç»Ÿä¸Šç¦æ­¢è¿è¡Œè„šæœ¬ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…ï¼šhttps:/go.microsoft.com/fwlink/?LinkID=135170 ä¸­çš„ about_Execution_Policiesã€‚
> æ‰€åœ¨ä½ç½® è¡Œ:1 å­—ç¬¦: 1

å¯ä»¥æŒ‰å¦‚ä¸‹æ­¥éª¤è§£å†³ï¼š

åœ¨ç»ˆç«¯æ‰§è¡Œï¼šget-ExecutionPolicyï¼Œæ˜¾ç¤ºRestricted

åœ¨ç»ˆç«¯æ‰§è¡Œï¼šset-ExecutionPolicy RemoteSigned

åœ¨ç»ˆç«¯æ‰§è¡Œï¼šget-ExecutionPolicyï¼Œæ˜¾ç¤ºRemoteSigned

æ­¤æ—¶åœ¨æ‰§è¡Œtsc -h åº”è¯¥å°±å¯ä»¥æ­£å¸¸æ˜¾ç¤ºäº†ã€‚

åœ¨æ ¹ç›®å½•åˆ›å»ºsrcæ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨å…¶ä¸­åˆ›å»ºindex.tsæ–‡ä»¶ï¼Œåœ¨é‡Œé¢å†™å…¥å¦‚ä¸‹å†…å®¹ï¼š

```typescript
let str:String = 'hello world';
```

ç„¶ååœ¨æ§åˆ¶å°ä¸­è¾“å…¥å¦‚ä¸‹å‘½ä»¤æ¥ç¼–è¯‘tsæ–‡ä»¶`tsc .\src\index.ts`ã€‚ç¼–è¯‘æˆåŠŸä¼šç”Ÿæˆjsæ–‡ä»¶ã€‚jsæ–‡ä»¶å†…å®¹å¦‚ä¸‹

```javascript
var str = 'hello world';
```



#### ç¼–è¯‘é”™è¯¯æŸ¥çœ‹

æœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥å¿«é€Ÿçš„çŸ¥é“è‡ªå·±å†™çš„tsä»£ç ï¼Œä¼šä¸ä¼šæœ‰ç¼–è¯‘é”™è¯¯å‘¢ï¼Ÿ

å¯ä»¥é€šè¿‡typescriptå®˜ç½‘ï¼šhttps://www.typescriptlang.org/play

å½“è¾“å…¥ï¼šlet str:String = 2; ä¼šåœ¨å³ä¾§Errorsé¡µç­¾ä¸­æç¤ºå¦‚ä¸‹é”™è¯¯ï¼š

> Type 'number' is not assignable to type 'String'.



#### Webpackå®‰è£…

åœ¨å‘½ä»¤è¡Œé‡Œæ‰§è¡Œï¼š`npm i webpack webpack-cli webpack-dev-server -D`



#### ts-loaderå®‰è£…

å‰é¢åœ¨ä»‹ç»`TypeScript`çš„æ—¶å€™ï¼Œä½¿ç”¨çš„æ˜¯`tsc`æ¥ç¼–è¯‘æˆ‘ä»¬çš„`TypeScript`æ–‡ä»¶ã€‚ä½†æ˜¯åœ¨çœŸå®é¡¹ç›®å¼€å‘çš„æ—¶å€™ï¼Œä¸ä¼šç›´æ¥ä½¿ç”¨`tsc`æ¥ç¼–è¯‘`TypeScript`æ–‡ä»¶ã€‚ä¸€èˆ¬ä¼šç»“åˆ`webpack`ç­‰æ„å»ºå·¥å…·æ¥ä½¿ç”¨ã€‚

åœ¨`webpack`ä¸­ï¼Œç¼–è¯‘`ts`æ–‡ä»¶æœ‰ä¸¤ç§æ–¹å¼ã€‚

1. ä½¿ç”¨`ts-loader`ç¼–è¯‘ã€‚
2. ä½¿ç”¨`babel-loader`ç¼–è¯‘ã€‚

ä¸‹æ–‡ä»‹ç»çš„æ˜¯ts-loaderä½œä¸ºç¼–è¯‘å·¥å…·ï¼Œé¦–å…ˆéœ€è¦å…ˆå®‰è£…ä¸€ä¸‹ã€‚

åœ¨å‘½ä»¤è¡Œé‡Œæ‰§è¡Œï¼š`npm i ts-loader typescript -D`



#### æ’ä»¶å®‰è£…

**html-webpack**æ’ä»¶

ç”¨äºè‡ªåŠ¨ç”Ÿæˆindex.html

åœ¨å‘½ä»¤è¡Œé‡Œæ‰§è¡Œï¼š`npm i html-webpack-plugin -D`

**CleanWebpackPlugin**æ’ä»¶

æ¯æ¬¡æˆåŠŸæ„å»ºä¹‹åè‡ªåŠ¨æ¸…ç©ºdistç›®å½•

åœ¨å‘½ä»¤è¡Œé‡Œæ‰§è¡Œï¼š`npm i clean-webpack-plugin -D`

**webpack-merge**æ’ä»¶

ç”¨äºåˆå¹¶é…ç½®æ–‡ä»¶

åœ¨å‘½ä»¤è¡Œé‡Œæ‰§è¡Œï¼š`npm i webpack-merge`



#### webpacké…ç½®æ–‡ä»¶

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºconfigç›®å½•ï¼Œå¹¶åœ¨è¿™é‡Œé¢åˆ›å»ºå¦‚ä¸‹4ä¸ªæ–‡ä»¶

**webpack.base.config.js**ï¼Œwebpackå…¬å…±é…ç½®æ–‡ä»¶

```javascript
const path = require('path')
const HtmlWebpackPlugin = require('html-webpack-plugin')

module.exports = {
    //æŒ‡å®šå…¥å£æ–‡ä»¶
	entry: {
		'app': './src/index.ts'
	},
    //æŒ‡å®šè¾“å‡ºæ–‡ä»¶
	output: {
		filename: './bundle.js',
		path: path.resolve('dist')
	},
    //è¦è§£æçš„æ‰©å±•å
	resolve: {
		extensions: ['.js', '.ts', 'tsx']
	},
	module: {
        //æŒ‡å®šts-loaderä½œä¸ºç¼–è¯‘å™¨ä»¥åŠä»–è¦ä½œç”¨çš„æ–‡ä»¶åæ ¼å¼ã€‚
		rules: [{
			test: /\.tsx?$/i,
			use: [{
				loader: 'ts-loader'
			}],
			exclude: /node_modules/
		}]
	},
	plugins: [
        //å¼•å…¥htmlæ’ä»¶è‡ªåŠ¨ç”Ÿæˆindex.html
		new HtmlWebpackPlugin({
			template: './src/tpl/index.html'
		})
	]
}
```

**webpack.config.js**ï¼Œé…ç½®æ–‡ä»¶å…¥å£

```javascript
//å¼•å…¥é…ç½®æ–‡ä»¶åˆå¹¶æ’ä»¶
const {merge} = require('webpack-merge')
const baseConfig = require('./webpack.base.config')
const devConfig = require('./webpack.dev.config')
const proConfig = require('./webpack.pro.config')

//ç”±è¿™ä¸ªå˜é‡å†³å®šåˆ°åº•æ˜¯å“ªä¸ªç¯å¢ƒ
let config = process.NODE_ENV === 'development' ? devConfig : proConfig;

module.exports = merge(baseConfig, config);
```

**webpack.dev.config.js**ï¼Œå¼€å‘ç¯å¢ƒé…ç½®æ–‡ä»¶

```javascript
module.exports = {
    devtool: 'cheap-module-eval-source-map',
    devServer: {
        port: 3000
    }
}
```

**webpack.pro.config.js**ï¼Œç”Ÿäº§ç¯å¢ƒé…ç½®æ–‡ä»¶

```javascript
const { CleanWebpackPlugin } = require('clean-webpack-plugin')

module.exports = {
    plugins: [
        new CleanWebpackPlugin()
    ]
}
```

package.jsonå†…å®¹ä¿®æ”¹å¦‚ä¸‹ï¼š

```json
{
  "name": "ts-one",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1",
    "start": "webpack serve --mode=development --config ./config/webpack.config.js", 
    "build": "webpack --mode=production --config ./config/webpack.config.js"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "devDependencies": {
    "clean-webpack-plugin": "^4.0.0-alpha.0",
    "html-webpack-plugin": "^5.3.1",
    "ts-loader": "^9.2.3",
    "typescript": "^4.3.2",
    "webpack": "^5.38.1",
    "webpack-cli": "^4.7.2",
    "webpack-dev-server": "^3.11.2",
    "webpack-merge": "^5.10.0"
  }
}
```

åœ¨srcç›®å½•åº•ä¸‹åˆ›å»ºtplç›®å½•ï¼Œåˆ›å»ºindex.htmlæ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ts-one</title>
</head>
<body>
    <div class="app"></div>
</body>
</html>
```

ä½¿ç”¨IDEç¼–è¾‘index.tsæ–‡ä»¶ï¼ŒåŠ å…¥å¦‚ä¸‹ä»£ç ï¼š

```ts
let str:string = 'hello world';

document.querySelectorAll(".app")[0].innerHTML = str;
```

#### é¡¹ç›®å¯åŠ¨

åœ¨é¡¹ç›®æ ¹ç›®å½•çš„æ§åˆ¶å°çª—å£ä¸­æ‰§è¡Œï¼šnpm run start

```cmd
PS D:\Workspace\nodejs\ts-one> npm run start

> ts-one@1.0.0 start
> webpack serve --mode=development --config ./config/webpack.config.js

i ï½¢wdsï½£: Project is running at http://localhost:8080/
i ï½¢wdsï½£: webpack output is served from /
i ï½¢wdsï½£: Content not from webpack is served from D:\Workspace\nodejs\ts-one
i ï½¢wdmï½£: asset ./bundle.js 407 KiB [emitted] (name: app)
asset index.html 201 bytes [emitted]
runtime modules 432 bytes 3 modules
modules by path ./node_modules/ 366 KiB
  modules by path ./node_modules/webpack-dev-server/ 21.2 KiB 12 modules
  modules by path ./node_modules/url/ 63.5 KiB 7 modules
  modules by path ./node_modules/html-entities/lib/*.js 61 KiB 5 modules
  modules by path ./node_modules/webpack/hot/ 2.1 KiB 3 modules
  modules by path ./node_modules/call-bind/*.js 1.59 KiB 2 modules
  modules by path ./node_modules/has-symbols/*.js 2.13 KiB 2 modules
  modules by path ./node_modules/function-bind/*.js 2.12 KiB 2 modules
  + 13 modules
./src/index.ts 96 bytes [built] [code generated]
./util.inspect (ignored) 15 bytes [built] [code generated]
webpack 5.89.0 compiled successfully in 1307 ms
i ï½¢wdmï½£: Compiled successfully.
```

æ­¤æ—¶ä½¿ç”¨æµè§ˆå™¨è®¿é—®ï¼šhttp://localhost:8080/ï¼Œé¡ºåˆ©çš„è¯åº”è¯¥èƒ½çœ‹åˆ°hello worldã€‚

#### é¡¹ç›®æ„å»º

åœ¨package.jsonæ–‡ä»¶ä¸‹åŠ å…¥ä¸‹é¢è¿™æ®µå‘½ä»¤ã€‚

```json
"build": "webpack --mode=production --config ./config/webpack.config.js"
```

ç„¶ååœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œï¼šnpm run build

```cmd
PS D:\Workspace\nodejs\ts-one> npm run build

> ts-one@1.0.0 build
> webpack --mode=production --config ./config/webpack.config.js

asset index.html 179 bytes [emitted]
asset ./bundle.js 84 bytes [emitted] [minimized] (name: app)
./src/index.ts 96 bytes [built] [code generated]
webpack 5.89.0 compiled successfully in 1099 ms
```

æ‰§è¡ŒæˆåŠŸä¼šå‘ç°é¡¹ç›®æ ¹ç›®å½•å¤šäº†ä¸€ä¸ªdistç›®å½•ï¼Œç›®å½•é‡Œé¢æœ‰bundle.jså’Œindex.htmlæ–‡ä»¶

ç›´æ¥ç”¨æµè§ˆå™¨æ‰“å¼€index.htmlæ–‡ä»¶ï¼Œçœ‹åˆ°çš„æ•ˆæœå’Œåˆšæ‰å¯åŠ¨æœåŠ¡å™¨çš„ç»“æœåº”è¯¥æ˜¯ä¸€æ ·çš„ã€‚



## åŸºæœ¬è¯­æ³•

### æ•°æ®ç±»å‹

ES6ä¹ç§æ•°æ®ç±»å‹

- Boolean
- Number
- String
- Array
- Function
- Object
- Symbol
- undefined
- null

TSæ–°å¢æ•°æ®ç±»å‹ï¼š

- void
- any
- never
- å…ƒç¥–
- æšä¸¾
- é«˜çº§ç±»å‹



### ç±»å‹æ³¨è§£

ç±»å‹æ³¨è§£ç›¸å½“äºjavaä¸­çš„ç±»å‹å£°æ˜ã€‚letåé¢çš„æ˜¯å˜é‡åï¼Œ: åé¢çš„æ˜¯å˜é‡ç±»å‹ï¼Œ=åé¢æ˜¯å€¼ã€‚

å¦‚æœå€¼å’Œå£°æ˜çš„ç±»å‹ä¸ä¸€è‡´ï¼Œç¼–è¯‘çš„æ—¶å€™ä¼šæŠ¥é”™ã€‚

```ts
let num: number = 1;
let str: string = "hello";

//æ•°ç»„ç±»å‹
let arr: number[] = [1,2,3];
let arr1: Array<number> = [1,2,3];

//å…ƒç¥–ç±»å‹ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ å¿…é¡»æ˜¯numberï¼Œç¬¬äºŒä¸ªå¿…é¡»æ˜¯stringï¼Œä¸å…è®¸æœ‰ç¬¬ä¸‰ä¸ª
let tuple: [number, string] = [1,"hello ts"]

//å‡½æ•°ï¼ˆxå’Œyä»£è¡¨å…¥å‚ï¼Œç±»å‹æ˜¯numberï¼Œä¸å†™å°±æ˜¯anyï¼Œç¼–è¯‘ä¼šæŠ¥é”™ã€‚è¿”å›å€¼å¯ä»¥ä¸å†™ï¼Œç¼–è¯‘å™¨è‡ªåŠ¨æ¨æ–­ã€‚
let add = (x: number, y: number ) => x+y;

//å‡½æ•°ï¼Œå®šä¹‰å’Œå‡½æ•°ä½“åˆ†å¼€
let compiler:(x:number, y:number)=>number
compiler = (a,b)=>a+b;

//å¯¹è±¡
let obj: {x:number, y:number} = {x:1, y:2};
obj.x = 3

//undefinedã€nullæ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»å‹ã€‚
let ud: undefined = undefined;
let nl: null = null;

//void
let func=()=>{}

//any å£°æ˜æ—¶æ²¡æœ‰ç±»å‹å°±æ˜¯any
let x;
x = [];
x = {}

//never ä»£è¡¨æ°¸è¿œä¸ä¼šæœ‰è¿”å›å€¼,ä¸€èˆ¬æ˜¯æŠ›å‡ºå¼‚å¸¸æˆ–è€…æ­»å¾ªç¯ã€‚
let error =()=>{
    throw new Error('error');
}

let enless = ()=>{
    while(true){}
}
```



### äº¤å‰ç´¢å¼•ç±»å‹

æ‰€è°“çš„é«˜çº§ç±»å‹å°±æ˜¯æŒ‡TSä¸ºäº†ä¿éšœè¯­è¨€çš„çµæ´»æ€§æ‰€å¼•å…¥çš„ä¸€äº›è¯­è¨€ç‰¹æ€§ã€‚ è¿™äº›ç‰¹æ€§å°†å¸®åŠ©æˆ‘ä»¬åº”å¯¹å¤æ‚å¤šå˜çš„å¼€å‘åœºæ™¯ã€‚æœ¬èŠ‚è¯¾æˆ‘ä»¬å°±æ¥å­¦ä¹ äº¤å‰ç±»å‹å’Œç´¢å¼•ç±»å‹ã€‚

#### äº¤å‰ç±»å‹

äº¤å‰ç±»å‹æ˜¯å°†å¤šä¸ªç±»å‹åˆå¹¶ä¸ºä¸€ä¸ªç±»å‹ã€‚æ–°çš„ç±»å‹å…·æœ‰æ‰€æœ‰ç±»å‹çš„ç‰¹æ€§ã€‚æ‰€ä»¥äº¤å‰ç±»å‹ç‰¹åˆ«é€‚åˆå¯¹è±¡æ··å…¥ï¼ˆmixinï¼‰çš„åœºæ™¯ã€‚

```ts
interface Person{
    run():void;
}

interface Teacher{
   goto():void;
}

let ative:Person & Teacher = {
   run(){},
   goto(){}
};
```

äº¤å‰ç±»å‹åŒ "&" è¿›è¡Œè¿æ¥ã€‚ æ­¤æ—¶çš„ ative å˜é‡å°±åº”è¯¥å…·å¤‡ä¸¤ä¸ªæ¥å£ç±»å‹æ‰€æ‹¥æœ‰çš„æˆå‘˜æ–¹æ³•ã€‚ è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯è™½ç„¶ä»åç§°ä¸Šçœ‹äº¤å‰ç±»å‹ç»™äººçš„æ„Ÿè§‰æ˜¯ç±»å‹çš„äº¤æ›¿ã€‚ ä½†å®é™…ä¸Šå®ƒæ˜¯å–æ‰€æœ‰ç±»å‹çš„å¹¶é›†ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨çœ‹è”åˆç±»å‹ã€‚

#### è”åˆç±»å‹

å…³äºè”åˆç±»å‹æˆ‘ä»¬åœ¨å‰é¢çš„è¯¾ç¨‹ä¸­å·²ç»å¤šæ¬¡æè¿‡äº†ã€‚è¿™é‡Œæˆ‘ä»¬æ­£å¼æ˜ç¡®ä¸‹å®ƒçš„æ¦‚å¿µã€‚æ‰€è°“çš„è”åˆç±»å‹å°±æ˜¯æŒ‡**ä»€ä¹ˆçš„ç±»å‹å¹¶ä¸ç¡®å®šï¼Œå¯ä»¥ä¸ºå¤šä¸ªç±»å‹ä¸­çš„ä¸€ä¸ª**ã€‚

```ts
const n:string|number = 1;
```

è¿™é‡Œå˜é‡ n çš„ç±»å‹æ˜¯string å’Œ number çš„è”åˆç±»å‹ï¼Œé‚£ä¹ˆå®ƒçš„å–å€¼å°±å¯ä»¥æ˜¯æ•°å­—å’Œå­—ç¬¦ä¸²ã€‚ è¿™é‡Œæˆ‘ä»¬é¡ºä¾¿ä»‹ç»ä¸‹å­—é¢é‡ç±»å‹ã€‚

æœ‰çš„æ—¶å€™æˆ‘ä»¬ä¸ä»…éœ€è¦é™å®šä¸€ä¸ªå˜é‡çš„ç±»å‹ï¼Œè€Œä¸”è¿˜éœ€è¦é™å®šå˜é‡çš„å–å€¼åœ¨æŸä¸€ä¸ªç‰¹å®šçš„èŒƒå›´å†…ã€‚

```ts
const m:"m"| 2 = 2;
```

æ¯”å¦‚æˆ‘ä»¬è¿™é‡Œè®¾ç½®äº†ä¸€ä¸ªå˜é‡mï¼Œå®ƒçš„ç±»å‹æ˜¯å­—é¢é‡çš„è”åˆç±»å‹ã€‚ ä¹Ÿå°±æ˜¯ m çš„å–å€¼åªèƒ½æ˜¯å­—ç¬¦ä¸²çš„ "m" å’Œ 2 é‡Œé¢çš„ä¸€ç§ã€‚

æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨è®²è®²å¯¹è±¡çš„è”åˆç±»å‹ï¼Œå›å½’åˆ°ä¸ŠèŠ‚è¯¾è®²çš„æ¡ˆä¾‹ä¸­æ¥ï¼Œæˆ‘ä»¬ç»™ä¸¤ä¸ªç±»éƒ½æ–°å¢åŠ äº†ä¸€ä¸ªå®ä¾‹æ–¹æ³•toStringã€‚

```ts
enum Type {obj, arr}
class IsObject{
    toOjbect(){
      console.log("hello object");
    }
    toString(){
      console.log("hello toString"); 
   }
}

class IsArray{
    toArray(){
     console.log("hello Array");
    }
    toString(){
      console.log("hello toString"); 
   }
}

function getType(type:Type){
  let target = type === Type.obj ? new IsObject() : new IsArray();
  return target;
}

getType(Type.obj);
```

å½“æˆ‘ä»¬åœ¨ TypeScript Playground ä¸­æŠŠé¼ æ ‡æŒ‡å‘taget æŸ¥çœ‹å…¶ç±»å‹çš„æ—¶å€™è¾“å‡ºï¼šlet targetï¼šisObject | isArrayã€‚

```ts
function getType(type:Type){
  let target = type === Type.obj ? new IsObject() : new IsArray();
  target.toString();
  return target;
}
```

æ­¤æ—¶å½“æˆ‘ä»¬è°ƒç”¨target.toString å¹¶ä¸ä¼šæŠ¥é”™ã€‚

```ts
function getType(type:Type){
  let target = type === Type.obj ? new IsObject() : new IsArray();
  target.toObject();
  return target;
}
```

è°ƒç”¨toObject ä¼šæŠ¥ç¼–è¯‘é”™è¯¯è¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ  å¦‚æœä¸€ä¸ªå¯¹è±¡è¢«ç¡®è®¤æ˜¯è”åˆç±»å‹ï¼Œå½“å®ƒçš„ç±»å‹æœªè¢«ç¡®è®¤çš„æƒ…å†µä¸‹åªèƒ½è®¿é—®æ‰€æœ‰ç±»å‹çš„å…±æœ‰æˆå‘˜ã€‚ isObject / isArray çš„å…±æœ‰æˆå‘˜æ˜¯toStringã€‚ å¦‚æœæˆ‘ä»¬è®¿é—®éå…±æœ‰æˆå‘˜æ–¹æ³•å°±ä¼šæŠ¥é”™ã€‚

é‚£ä¹ˆè¿™ä¸ªæ—¶å€™æœ‰è¶£çš„äº‹æƒ…åˆå‘ç”Ÿäº†ï¼Œè”åˆç±»å‹çœ‹èµ·æ¥å¥½åƒæ˜¯å–æ‰€æœ‰ç±»å‹çš„å¹¶é›†ï¼Œç„¶è€Œåœ¨è¿™ç§æƒ…å†µä¸‹åªèƒ½è®¿é—®æ‰€æœ‰è”åˆç±»å‹çš„äº¤é›†ã€‚æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬è¦åŒºåˆ†ä¸‹è¿™ä¸ªæ¦‚å¿µã€‚

æ€»ç»“ï¼šäº¤å‰ç±»å‹é€‚åˆåšå¯¹è±¡çš„æ··å…¥ã€‚ è”åˆç±»å‹å¯ä»¥ä½¿ç±»å‹å…·æœ‰ä¸ç¡®å®šæ€§å¯ä»¥å¢å¼ºä»£ç çš„çµæ´»æ€§ã€‚

#### ç´¢å¼•ç±»å‹

åœ¨JavaScriptä¸­æˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°è¿™æ ·ä¸€ç§åœºæ™¯ä»å¯¹è±¡ä¸­å»è·å–ä¸€äº›å±æ€§çš„å€¼ï¼Œç„¶åå»ºç«‹ä¸€ä¸ªé›†åˆã€‚

```ts
let obj = {
   x: 1,
   y: 2,
   n: 3,
   m: 4
}
```

æˆ‘ä»¬é€šè¿‡JavaScriptæ¥å®ç°ä¸‹è¿™ä¸ªéœ€æ±‚ï¼š

```ts
let obj = {
   x: 1,
   y: 2,
   n: 3,
   m: 4
}

function getValue(obj:any, keys:string[]){
     return keys.map(key=>{
            return obj[key];
      });
}

console.log(getValue(obj, ["x","n"]));
```

è¿™é‡Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º getValue çš„å‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸¤ä¸ªå‚æ•° any ç±»å‹çš„å¯¹è±¡ï¼Œ å­—ç¬¦ä¸²ç±»å‹çš„æ•°ç»„ã€‚ é€šè¿‡keys.map è·å– xï¼Œn è¿™ä¸¤ä¸ªå±æ€§çš„å€¼ã€‚

å¦‚æœæˆ‘ä»¬éšæ„çš„å»æŒ‡å®šä¸¤ä¸ªä¸å­˜åœ¨çš„å±æ€§å‘¢ï¼Ÿ

```ts
getValue(obj, ["a","b"]);

//è¾“å‡º: [undefined, undefined] 
```

æ­¤æ—¶å¹¶ä¸ä¼šæŠ¥é”™ï¼Œé‚£ä¹ˆå¦‚ä½•ä½¿ç”¨TS å¯¹è¿™ç§ç°è±¡è¿›è¡Œçº¦æŸå‘¢ï¼Ÿ  è¿™é‡Œæˆ‘ä»¬å°±è¦åˆ©ç”¨åˆ°ç´¢å¼•ç±»å‹ã€‚ è¦äº†è§£ç´¢å¼•ç±»å‹æˆ‘ä»¬é¦–å…ˆè¦äº†è§£ä¸‹å…¶ä»–çš„æ¦‚å¿µã€‚

##### 1.ç´¢å¼•ç±»å‹çš„æŸ¥è¯¢æ“ä½œç¬¦ keyof T

keyof T è¡¨ç¤ºç±»å‹ T æ‰€æœ‰å…¬å…±å±æ€§çš„å­—é¢é‡è”åˆç±»å‹ã€‚ ä¸¾ä¸ªç®€å•ä¾‹å­è¯´æ˜ä¸‹:

```ts
interface Person {
    name: string;
    age: number;
}

let person: keyof Person; // 'name' | 'age'
```

##### 2.ç´¢å¼•è®¿é—®æ“ä½œç¬¦ T[K]

T[K] è¿™ä¸ªçš„å«ä¹‰å°±æ˜¯å¯¹è±¡Tçš„å±æ€§K æ‰€ä»£è¡¨çš„ç±»å‹ã€‚æˆ‘ä»¬å†æ¥ä¸¾ä¸ªä¾‹å­ï¼š

```ts
interface Person {
    name: string;
    age: number;
}

let person: Person = {
    name: 'Jarid',
    age: 35
};

let personProps:Person['age']; 
```

è¿™é‡Œæˆ‘ä»¬æŒ‡å®š personProps çš„ç±»å‹æ˜¯Person.ageçš„ç±»å‹ï¼Œé‚£ä¹ˆ personProps ç±»å‹å°±ä¸º numberã€‚

##### 3. T extend U

è¡¨ç¤ºæ³›å‹å˜é‡å¯ä»¥é€šè¿‡ç»§æ‰¿æŸä¸ªç±»å‹è·å¾—æŸäº›å±æ€§ã€‚ æ¸…æ¥šäº†è¿™ä¸‰ä¸ªæ¦‚å¿µæˆ‘ä»¬å°±æ¥æ”¹é€ ä¸‹ getValue è¿™ä¸ªå‡½æ•°ã€‚

é¦–å…ˆæˆ‘ä»¬æƒ³æŠŠgetValue æ”¹é€ æˆä¸€ä¸ªæ³›å‹å‡½æ•°ï¼Œæˆ‘ä»¬éœ€è¦åšä¸€äº›çº¦æŸã€‚è¿™ä¸ªçº¦æŸå°±æ˜¯keysé‡Œé¢çš„å…ƒç´ ï¼Œä¸€å®šæ˜¯obj çš„å±æ€§ã€‚å¦‚ä½•åšè¿™ç§çº¦æŸå‘¢ï¼Ÿ

```ts
let obj = {
   x: 1,
   y: 2,
   n: 3,
   m: 4
}

function getValue<T>(obj:T, keys:string[]){
     return keys.map(key=>{
            return obj[key];
      });
}

getValue(obj, ["x","n"]);
```

æˆ‘ä»¬å…ˆæ¥å®šä¹‰ä¸€ä¸ªæ³›å‹å˜é‡T ï¼Œæ¥çº¦æŸobj ã€‚ ç„¶åå†æ¥å®šä¹‰ä¸€ä¸ªæ³›å‹å˜é‡K , ç”¨ä»–æ¥çº¦æŸ keys æ•°ç»„ã€‚

```ts
let obj = {
   x: 1,
   y: 2,
   n: 3,
   m: 4
}

function getValue<T, k>(obj:T, keys:K[]){
     return keys.map(key=>{
            return obj[key];
      });
}

getValue(obj, ["x","n"]);

```

ç„¶åæˆ‘ä»¬ç»™ K æ¥åšä¸ªç±»å‹çº¦æŸã€‚ è®©ä»–ç»§æ‰¿obj æ‰€æœ‰ç±»å‹çš„è”åˆç±»å‹ã€‚

```ts
let obj = {
   x: 1,
   y: 2,
   n: 3,
   m: 4
}

function getValue<T, K extends keyof T>(obj:T, keys:K[]){
     return keys.map(key=>{
            return obj[key];
      });
}

console.log(getValue(obj, ["x","y"]));


```

ç„¶åæˆ‘ä»¬æ¥è®¾ç½®ä¸‹è¿”å›å€¼ï¼š

```ts
let obj = {
   x: 1,
   y: 2,
   n: 3,
   m: 4
}

function getValue<T, K extends keyof T>(obj:T, keys:K[]):T[K][]{
     return keys.map(key=>{
            return obj[key];
      });
}

console.log(getValue(obj, ["x","y"]));

```

é¦–å…ˆè¿”å›å€¼çš„ç±»å‹æ˜¯ä¸ªæ•°ç»„ï¼Œæ•°ç»„çš„æˆå‘˜çš„ç±»å‹å°±æ˜¯T[k] å¯¹åº”çš„ç±»å‹ã€‚ è¿™æ ·æˆ‘ä»¬å°±é€šè¿‡ä¸€ä¸ªç´¢å¼•ç±»å‹æŠŠgetValueæ”¹é€ å®Œæ¯•äº†ã€‚

```ts
getValue(obj, ["a","b"]); 
```

è¿™ä¸ªæ—¶å€™å½“æˆ‘ä»¬æŒ‡å®šä¸€ä¸ªéobj çš„å±æ€§ï¼Œç¼–è¯‘å™¨å°±ä¼šæŠ¥é”™ã€‚

```ts
Type '"a"' is not assignable to type '"x" | "n" | "y" | "m"'.
Type '"b"' is not assignable to type '"x" | "n" | "y" | "m"'.
```

ç”±æ­¤å¯è§ç´¢å¼•ç±»å‹å¯ä»¥å®ç°å¯¹å¯¹è±¡å±æ€§çš„æŸ¥è¯¢å’Œè®¿é—®ã€‚ ç„¶ååœ¨é…åˆæ³›å‹çº¦æŸå°±èƒ½å¤Ÿä½¿æˆ‘ä»¬ä½¿ç”¨å¯¹è±¡ï¼Œå¯¹è±¡å±æ€§ / ä»¥åŠå±æ€§å€¼ä¹‹é—´çš„çº¦æŸå…³ç³»ã€‚



### æ˜ å°„ç±»å‹

TypeScriptæä¾›äº†ä»æ—§ç±»å‹ä¸­åˆ›å»ºæ–°ç±»å‹çš„ä¸€ç§æ–¹å¼ â€” **æ˜ å°„ç±»å‹** ã€‚ åœ¨æ˜ å°„ç±»å‹é‡Œï¼Œæ–°ç±»å‹ä»¥ç›¸åŒçš„å½¢å¼å»è½¬æ¢æ—§ç±»å‹é‡Œæ¯ä¸ªå±æ€§ã€‚ ä¾‹å¦‚ï¼Œä½ å¯ä»¥è®©æ¯ä¸ªå±æ€§æˆä¸º åªè¯»ç±»å‹æˆ–å¯é€‰çš„ã€‚

ç¤ºä¾‹ä»£ç :

```ts
interface obj {
   x: number
   y: string
   n: any
}
```

å¦‚æœæˆ‘ä»¬è®©obj ä¸­çš„æˆå‘˜å±æ€§å˜ä¸ºåªè¯»æ€ä¹ˆåŠï¼Ÿ æœ‰ä¸€ä¸ªç‰¹åˆ«ç®€å•çš„æ–¹æ³•ã€‚

#### Readonly æ¥å£

```ts
type ReadonlyObj = Readonly<obj>;
```

é¦–å…ˆå®šä¹‰ä¸€ä¸ªç±»å‹åˆ«å, ç±»å‹åˆ«åçš„å€¼æ˜¯TSå†…ç½®çš„æ³›å‹æ¥å£ï¼Œä¼ å…¥çš„å€¼å°±æ˜¯objã€‚  å½“æˆ‘ä»¬é€šè¿‡TypeScript Playground å»æŸ¥çœ‹ReadonlyObjçš„ç±»å‹è·Ÿæˆ‘ä»¬åˆšåˆšå®šä¹‰çš„æ¥å£æˆå‘˜ obj æ˜¯ä¸€è‡´çš„ï¼Œä½†æ˜¯æˆå‘˜å˜æˆäº†åªè¯»ã€‚

é‚£ä¹ˆè¿™ç§å†…ç½®çš„æ¥å£æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿæˆ‘ä»¬æ¥çœ‹ä¸‹ç›¸å…³çš„æºç ï¼š

```ts
type Readonly<T> = {
  readonly [P in keyof T]: T[P];
}
```

æˆ‘ä»¬æ¥çœ‹ä¸‹Readonly çš„å®ç°ï¼Œ é¦–å…ˆè¿™æ˜¯ä¸€ä¸ªæ³›å‹æ¥å£è€Œä¸”æ˜¯ä¸€ä¸ªå¯ç´¢å¼•ç±»å‹çš„æ³›å‹æ¥å£ã€‚ å®ƒçš„ç´¢å¼•ç­¾åæ˜¯ P in keyof Tã€‚ å…¶ä¸­keyof T å°±æ˜¯ä¸€ä¸ªç´¢å¼•ç±»å‹çš„æŸ¥è¯¢æ“ä½œç¬¦ï¼Œå®ƒè¡¨ç¤º T æ‰€æœ‰å±æ€§çš„è”åˆç±»å‹ï¼ˆx | y | nï¼‰ è¿™ç§æ ¼å¼çš„å±æ€§åˆ—è¡¨ã€‚  è¿™é‡Œçš„P in ç›¸å½“äº for in æ“ä½œï¼Œç±»å‹å˜é‡ P å®ƒä¼šä¾æ¬¡ç»‘å®šåˆ°æ¯ä¸ªå±æ€§ã€‚

ç´¢å¼•ç­¾åçš„è¿”å›å€¼å°±æ˜¯ä¸€ä¸ªç´¢å¼•è®¿é—®æ“ä½œç¬¦äº†ã€‚ è¿™é‡Œçš„ T[P]  T è¡¨ç¤ºä¼ å…¥çš„å¯¹è±¡ P è¡¨ç¤ºä¾æ¬¡ç»‘å®šçš„å±æ€§ã€‚ æœ€åå‰é¢åœ¨åŠ ä¸Š  readonly æ˜ å°„åŸå§‹ç±»å‹çš„æ‰€æœ‰å±æ€§ï¼Œå°±æŠŠæ‰€æœ‰çš„å±æ€§å˜æˆäº†åªè¯»ã€‚   

```ts
type Readonly<å¯¹è±¡> = {
  readonly å±æ€§åˆ—è¡¨[0]: ç»“æœç±»å‹;
  readonly å±æ€§åˆ—è¡¨[1]: ç»“æœç±»å‹;
  readonly å±æ€§åˆ—è¡¨[2]: ç»“æœç±»å‹;
}
```

ä»¥ä¸Šå°±æ˜¯å†…ç½®æ¥å£ Readonly çš„å®ç°äº†ã€‚


#### Partial æ¥å£

å¦‚æœæˆ‘ä»¬æƒ³è¦æŠŠä¸€ä¸ªæ¥å£çš„å±æ€§éƒ½å˜æˆå¯é€‰çš„æ€ä¹ˆåŠï¼Ÿ

```ts
type PartialObj = Partial<obj>;
```

ä½¿ç”¨å†…ç½®çš„ Partial æ¥å£ï¼Œè¿™æ ·æ–°çš„ç±»å‹å°±èƒ½æŠŠæˆå‘˜å˜æˆå¯é€‰ã€‚

æºç å¦‚ä¸‹ï¼š

```ts
type Partial<T> = {
    [P in keyof T]?: T[P];
}
```

è¿™ä¸ªè·Ÿåˆšåˆšåªè¯»çš„å®ç°å‡ ä¹æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡åŠ ä¸Šäº† "?" æŠŠå±æ€§å˜æˆäº†å¯é€‰ã€‚  ç„¶åæˆ‘ä»¬åœ¨ä»‹ç»ä¸€ç§ pick æ¥å£ï¼Œä»–èƒ½æŠ½å–objçš„ä¸€äº›å­é›†ã€‚

#### pick æ¥å£

å®ƒæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯objï¼Œç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯æˆ‘ä»¬è¦æŠ½å–çš„å±æ€§keyã€‚

```ts
interface obj {
   x: number
   y: string
   n: any
}
type PickObj = Pick<obj, "x" | "y">;
```

è¿™æ ·æ¥å£çš„x / y æˆå‘˜å°±èƒ½è¢«å•ç‹¬çš„æŠ½å–å‡ºæ¥ï¼Œå½¢æˆä¸€ä¸ªæ–°çš„ç±»å‹ã€‚

æºç å®ç°ï¼š

```ts
type Pick<T, K extends keyof T> = {
   [P in k]: T[P];
}
```

ç¬¬ä¸€ä¸ªå‚æ•°T è¡¨ç¤ºæˆ‘ä»¬è¦æŠ½å–çš„å¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ Kæœ‰ä¸ªçº¦æŸå°±æ˜¯ Kä¸€å®šè¦æ˜¯æ¥è‡ªå˜é‡Tå±æ€§å­—é¢é‡çš„è”åˆç±»å‹ã€‚  ç„¶åæ–°çš„å±æ€§çš„ç±»å‹é€šè¿‡in ä» K å±æ€§åˆ—è¡¨ä¸­é€‰å–ã€‚

ä»¥ä¸Šçš„ä¸‰ç§æ¥å£TS æˆä¸ºåŒæ€ï¼Œ æ„æ€å°±æ˜¯ä»–ä»¬åªä¼šä½œç”¨ä¸ obj æ¥å£å±æ€§è€Œä¸ä¼šå¼•å…¥æ–°çš„å±æ€§ã€‚ä¸‹é¢æˆ‘ä»¬åœ¨ä»‹ç»ä¸€ä¸ªæ–°çš„æ˜ å°„ç±»å‹ï¼Œä»–ä¼šåˆ›å»ºæ–°çš„å±æ€§ã€‚

#### Record æ¥å£

Recordåˆ›å»ºäº†ä¸€ä¸ªæ‹¥æœ‰ Keysç±»å‹çš„å±æ€§å’Œå¯¹åº”å€¼çš„ Type çš„å¯¹è±¡ã€‚

```ts
interface obj {
   x: number
   y: string
   n: any
}

type RecordObj = Record<"a" | "b", obj>;

let obj:RecordObj = {
    a:{x:1,y:"1",n:2},
    b:{x:2,y:"3",n:4}
}
```

è¿™é‡Œæˆ‘ä»¬éœ€è¦é¢„å®šä¹‰ä¸€äº›æ–°çš„å±æ€§ a / b ï¼Œ ç¬¬äºŒä¸ªå‚æ•°æ˜¯æ¥è‡ªä¸€ä¸ªæˆ‘ä»¬å·²çŸ¥çš„ç±»å‹ã€‚ è¿™æ ·æ–°çš„ç±»å‹å°±æœ‰ä¸€äº›å±æ€§ç”±Record ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šï¼Œç±»å‹ç”± Record ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šã€‚  è¿™ç§ç±»å‹å°±æ˜¯ä¸€ç§éåŒæ€çš„ç±»å‹ã€‚

å¯ä»¥çœ‹åˆ°Recordç±»å‹çš„å¥½å¤„æ˜¯ç®€æ˜çš„ã€‚å½“æˆ‘ä»¬æƒ³è¦å»é™åˆ¶å±æ€§æ—¶ï¼Œä¹Ÿå°±æ˜¯Recordç±»å‹å¤§æ˜¾èº«æ‰‹çš„æ—¶å€™ã€‚ä¸‹é¢çš„ç¤ºä¾‹æ˜¯æˆ‘ä»¬åœ¨Recordä¸­ä½¿ç”¨è”åˆå­—ç¬¦ä¸²å»é™åˆ¶å±æ€§é”®ã€‚

```ts
type roles = 'tester' | 'developer' | 'manager'

const staffCount: Record<roles, number> = {
  tester: 10,
  developer: 20,
  manager: 1
}

```

åœ¨ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨è”åˆç±»å‹çº¦æŸå®šä¹‰äº†ä¸€ä¸ªç±»å‹ã€‚å¦‚æœæˆ‘ä»¬å°è¯•å»è®¿é—®ä¸€ä¸ªä¸åœ¨è”åˆç±»å‹ä¸­çš„å±æ€§æ—¶ï¼ŒVS Code ç¼–è¯‘å™¨ä¼šè¿›è¡Œæç¤ºã€‚å½“æˆ‘ä»¬ç»´æŠ¤ä¸€ä¸ªå¤æ‚ç±»å‹çš„æ—¶å€™è¿™éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºç¼–è¯‘å™¨ä¼šé˜»æ­¢è¿™ç±»é”™è¯¯çš„å‘ç”Ÿã€‚

å¦ä¸€ä¸ªæœ‰ç”¨çš„åŠŸèƒ½æ˜¯keyså¯ä»¥æ˜¯æšä¸¾ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨staffTypesæšä¸¾ä½œä¸ºRecordç±»å‹çš„é™åˆ¶å€¼ï¼Œå› æ­¤å¯è¯»æ€§æ›´å¥½ã€‚è¯·æ³¨æ„ï¼Œå°½åœ¨TypeScript2.9ä¹‹åæ‰æ”¯æŒæšä¸¾ã€‚å› æ­¤ï¼Œåœ¨2.9ç‰ˆæœ¬ä¹‹å‰ï¼Œkeyçš„ç±»å‹è¢«é™åˆ¶ä¸ºstringç±»å‹ã€‚


#### Recordç±»å‹ å’Œ keyof ç»„åˆ

é€šè¿‡ä½¿ç”¨ `keyof`ä»ç°æœ‰ç±»å‹ä¸­è·å–æ‰€æœ‰çš„å±æ€§ï¼Œå¹¶å’Œå­—ç¬¦ä¸²ç»„åˆï¼Œæˆ‘ä»¬å¯ä»¥åšå¦‚ä¸‹äº‹æƒ…ï¼š

```ts
interface Staff {
  name:string,
  salary:number,
}
  
 type StaffJson = Record<keyof Staff, string>

  const product: StaffJson = {
    name: 'John',
    salary:'3000'
  }

```

å½“ä½ æƒ³è¦ä¿ç•™ç°æœ‰ç±»å‹çš„å±æ€§ä½†å°†å€¼ç±»å‹è½¬æ¢ä¸ºå…¶ä»–ç±»å‹æ—¶ï¼Œè¿™å¾ˆä¾¿æ·ã€‚

æºç å®ç°ï¼š

```ts
 type Record<K extends keyof any, T> = {               
    [P in K]: T;                                          
 };
```

K extends keyof any çº¦æŸKå¿…é¡»ä¸ºè”åˆç±»å‹, æ¯ä¸ªå±æ€§([P in K]),éƒ½è½¬ä¸ºTç±»å‹ã€‚

æ˜ å°„ç±»å‹æœ¬è´¨ä¸Šæ˜¯ä¸€ç§é¢„è®¾ç±»å‹çš„æ³›å‹æ¥å£ï¼Œé€šå¸¸è¿˜ä¼šé›†åˆåˆ°ç´¢å¼•ç±»å‹è·å–å¯¹è±¡çš„å±æ€§ï¼Œå’Œå±æ€§å€¼ã€‚ä»è€ŒæŠŠä¸€ä¸ªå¯¹è±¡å˜æˆæˆ‘ä»¬æƒ³è¦çš„ç»“æ„ã€‚



### å£°æ˜æ–‡ä»¶

å½“æˆ‘ä»¬åœ¨ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“çš„æ—¶å€™ï¼Œå¾ˆå¤šç¬¬ä¸‰æ–¹åº“ä¸æ˜¯ç”¨TS å†™çš„ï¼Œ å®ƒä»¬æ˜¯é€šè¿‡åŸç”Ÿçš„JavaScriptæˆ–è€…æ˜¯æµè§ˆå™¨ / æˆ–è€…æ˜¯node æä¾›çš„ run time å¯¹è±¡ã€‚  å¦‚æœæˆ‘ä»¬ç›´æ¥ä½¿ç”¨TS è‚¯å®šå°±ä¼šæŠ¥é”™ç¼–è¯‘ä¸é€šè¿‡ã€‚å‡è®¾ä¸€ä¸ªåœºæ™¯æˆ‘ä»¬è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„å·¥å…·åº“jQueryã€‚

ä¹‹å‰çš„æ–¹å¼æ˜¯åœ¨html ä¸­é€šè¿‡script æ ‡ç­¾å¼•å…¥jQueryã€‚ è¿™æ ·å°±èƒ½å…¨å±€ä½¿ç”¨jQueryï¼Œæˆ‘ä»¬é€šå¸¸ä¼šé€šè¿‡jQuery(".app") å»è·å–å¯¹åº”çš„DOMå¯¹è±¡ã€‚

ä½†æ˜¯åœ¨TS ä¸­å¹¶ä¸çŸ¥é“jQueryæ˜¯ä»€ä¹ˆä¸œè¥¿ï¼š

```ts
jQuery(".app")
```

å½“æˆ‘ä»¬ç›´æ¥ä½¿ç”¨ä¼šæŠ¥é”™ï¼š

```ts
Cannot find name 'jQuery'.
```

æ‰€ä»¥æˆ‘ä»¬éœ€è¦é€šè¿‡ä¸€ä¸ªå…³é”®å­— æ¥å‘Šè¯‰TS è¿™ä¸ªå˜é‡å·²ç»åœ¨å…¶ä»–åœ°æ–¹è¢«å®šä¹‰äº†ï¼Œä½ ç›´æ¥ä½¿ç”¨å°±å¯ä»¥äº†ã€‚

```ts
declare let jQuery:(selector:string) => any;

jQuery(".app");
```

è¿™æ ·å°±ä¸ä¼šå†æŠ¥é”™äº†ã€‚é€šå¸¸æˆ‘ä»¬ä¼šæŠŠè¿™ä¸ªå£°æ˜è¯­å¥æ”¾åœ¨ä¸€ä¸ªå•ç‹¬æ–‡ä»¶ä¸­å»å®ƒæ˜¯ä»¥  .d.ts ç»“å°¾çš„ã€‚ è¿™ä¸ªå°±æ˜¯å£°æ˜æ–‡ä»¶ d å°±ä»£è¡¨å£°æ˜ã€‚

è¿™é‡Œå¤§å®¶è¦æ³¨æ„çš„æ˜¯ï¼šdeclare let jQuery å¹¶æ²¡æœ‰çœŸçš„å®šä¹‰ä¸€ä¸ªå˜é‡çš„å®ç°ï¼Œåªæ˜¯å®šä¹‰äº†å…¨å±€å˜é‡jQueryçš„ç±»å‹ï¼Œä»…ä»…ä¼šç”¨äºç¼–è¯‘æ—¶çš„æ£€æŸ¥ï¼Œå¹¶ä¸æ˜¯å®ç°åŠŸèƒ½çš„çœŸæ­£ä»£ç ã€‚ æœ‰äº†è¿™ä¸ªæ–‡ä»¶æˆ‘ä»¬å°±èƒ½äº«å—TS å¸¦æ¥çš„çº¢åˆ©ï¼Œåœ¨ä½¿ç”¨æ—¶å°±èƒ½è·å¾—ä»£ç è¡¥å…¨ï¼Œæ¥å£æç¤ºç­‰åŠŸèƒ½ã€‚

ä¸€èˆ¬æ¥è¯´é»˜è®¤æƒ…å†µä¸‹TS ä¼šè§£æé¡¹ç›®ä¸­çš„æ‰€æœ‰TSæ–‡ä»¶å½“ç„¶ä¹ŸåŒ…å«ä»¥ .d.ts ç»“å°¾çš„æ–‡ä»¶ã€‚ æ‰€ä»¥å°†æˆ‘ä»¬æŠŠjQuery.d.tsçš„ç±»å‹å£°æ˜æ–‡ä»¶æ”¾åœ¨é¡¹ç›®ä¸­çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„.ts æ–‡ä»¶éƒ½å¯ä»¥è·å¾—jQueryçš„ç±»å‹å®šä¹‰ã€‚  

é‚£å½“æˆ‘ä»¬ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“çš„æ—¶å€™æ˜¯ä¸æ˜¯è¿˜è¦ç»™å®ƒæ”¹è£…ï¼Œä»å¤´åˆ°å°¾å»å†™å£°æ˜æ–‡ä»¶å‘¢ï¼Ÿè¿™ä¹ˆå¤§çš„å·¥ä½œé‡è°è¿˜æ•¢å»ä½¿ç”¨ç¬¬ä¸‰æ–¹å·¥å…·åº“ï¼Œç›´æ¥æ”¾å¼ƒå¾—äº†ã€‚  åˆ«æ‰¾æ€¥æˆ‘ä»¬æœ‰ç¬¬ä¸‰æ–¹çš„å£°æ˜æ–‡ä»¶ã€‚ ç¤¾åŒºæˆ–è€…å®˜æ–¹æ—©å°±ç»™æˆ‘ä»¬å†™å¥½äº†ã€‚ æ¯”å¦‚jQueryï¼š

#### å®‰è£…jQueryç±»å‹æ–‡ä»¶

```ts
npm install --save @types/jquery
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/744/1639121987000/a316a90bfb9d44c1b4295b1f3fef6418.png)

> https://www.npmjs.com/package/@types/jquery

æ³¨æ„è·Ÿæˆ‘ä»¬åˆšåˆšè¯´çš„ä¸€æ · @types  ä»…ä»…åªæœ‰ç±»å‹å®šä¹‰ï¼Œå¹¶æ²¡æœ‰å…·ä½“çš„å®ç°ã€‚ ä¸æ™®é€šçš„npm æ¨¡å—ä¸åŒ@types æ˜¯ç»Ÿä¸€ç”±DefinitelyTyped è¿™ä¸ªç»„ç»‡æ¥ç®¡ç†çš„ã€‚

> https://github.com/DefinitelyTyped/DefinitelyTyped

è¿™ä¸ªç»„ç»‡ä¸€ç›´åœ¨åˆ›å»ºé’ˆå¯¹ä¸åŒåº“éƒ½æä¾›é«˜è´¨é‡å£°æ˜æ–‡ä»¶çš„ç¤¾åŒºã€‚ 

å½“æˆ‘ä»¬å®‰è£…@types jQueryäº†ä¹‹åæ¥æµ‹è¯•ä¸‹ï¼š

```ts
jQuery().addClass()
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/744/1639121987000/c31b9a9cc3324218adfb55e41efd6858.png)

æ­¤æ—¶å½“æˆ‘ä»¬å»ä½¿ç”¨ jQuery å°±è·å¾—ä»£ç è¡¥å…¨/æç¤ºçš„åŠŸèƒ½äº†ï¼Œé‡Œé¢æœ‰éå¸¸ä¸°å¯Œçš„å®ä¾‹æ–¹æ³•ã€‚

å¦‚æœæˆ‘ä»¬åœ¨ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ä¸ç¡®å®šä»–æœ‰æ²¡æœ‰å£°æ˜æ–‡ä»¶æ€ä¹ˆåŠï¼Ÿ ä½ å¯ä»¥å»[TypeSearch](https://www.typescriptlang.org/dt/search)ä¸­æœç´ ä¸‹ã€‚

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/744/1639121987000/7529b653b29e4cf497182fbe13aa5638.png)

é™¤äº†åœ¨TypeSearch ä¸­æ‰¾åˆ°è¿™äº›å¸¸ç”¨åº“çš„å®šä¹‰ ï¼Œç°åœ¨å¾ˆå¤šåº“éƒ½æ˜¯æºä»£ç åªå¸¦ @types å®šä¹‰ã€‚ ä¹Ÿå°±è¯´ä½ ç”¨ npm install å®‰è£…æŸä¸ªåº“çš„æ—¶å€™ï¼Œä»–çš„ç±»å‹å®šä¹‰å°±åŒ…å«å…¶ä¸­ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½ä¸€æ¬¡å®‰è£…åŒé‡æå®šã€‚

æ¯”å¦‚è¯´æœ‰ä¸€ä¸ªåº“redux å®ƒå°±æ˜¯ç›´æ¥æä¾›äº†å®šä¹‰æ–‡ä»¶å’Œæºä»£ç ã€‚

```ts
npm install --save redux
```

ç„¶ååœ¨ä»–çš„æºç ç›®å½•ä¸­å°±å¯ä»¥çœ‹åˆ°ä¸€ä¸ªindex.d.ts çš„ç±»å‹å£°æ˜æ–‡ä»¶äº†ã€‚

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/744/1639121987000/4ade1ec5af344273b64a40a86b77d1e2.png)

å¤§å®¶å¯èƒ½ä¼šå¥½å¥‡ TS æ˜¯æ€ä¹ˆçŸ¥é“è¿™äº›ç±»å‹å£°æ˜æ–‡ä»¶ å®ƒä»¬æ˜¯æ€ä¹ˆæ ·è¢«åŠ è½½è¿›æ¥çš„å‘¢ï¼Ÿ é»˜è®¤æƒ…å†µä¸‹æ‰€æœ‰è¯¾ä»¶çš„@types åŒ…éƒ½ä¼šåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­è¢«åŒ…å«è¿›æ¥ã€‚ æ‰€æœ‰ node_modules -> @typesæ–‡ä»¶å¤¹ä¸‹ä»¥åŠå®ƒä»¬å­æ–‡ä»¶ä¸‹çš„åŒ…éƒ½ä¼šè‡ªåŠ¨çš„è¢«åŠ è½½è¿›æ¥ã€‚



# Vue2

## ä»‹ç»

Vue (è¯»éŸ³ /vjuË/ï¼Œç±»ä¼¼äº view) æ˜¯ä¸€å¥—ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„æ¸è¿›å¼æ¡†æ¶ã€‚ä¸å…¶å®ƒå¤§å‹æ¡†æ¶ä¸åŒçš„æ˜¯ï¼ŒVue è¢«è®¾è®¡ä¸ºå¯ä»¥è‡ªåº•å‘ä¸Šé€å±‚åº”ç”¨ã€‚Vue çš„æ ¸å¿ƒåº“åªå…³æ³¨è§†å›¾å±‚ï¼Œä¸ä»…æ˜“äºä¸Šæ‰‹ï¼Œè¿˜ä¾¿äºä¸ç¬¬ä¸‰æ–¹åº“æˆ–æ—¢æœ‰é¡¹ç›®æ•´åˆã€‚å¦ä¸€æ–¹é¢ï¼Œå½“ä¸ç°ä»£åŒ–çš„å·¥å…·é“¾ä»¥åŠå„ç§æ”¯æŒç±»åº“ç»“åˆä½¿ç”¨æ—¶ï¼ŒVue ä¹Ÿå®Œå…¨èƒ½å¤Ÿä¸ºå¤æ‚çš„å•é¡µåº”ç”¨æä¾›é©±åŠ¨ã€‚

å¦‚æœæƒ³è¦å¿«é€Ÿäº†è§£Vueï¼Œä¸éœ€è¦å…ˆäº†è§£ä»–çš„å®ç°åŸç†ï¼Œé¦–å…ˆå…ˆä»è¿™ä¸ªæ¡†æ¶æ˜¯å¦‚ä½•åœ¨å·¥ä½œä¸­ä½¿ç”¨çš„å¼€å§‹ã€‚

Vueæ˜¯MVVMæ¡†æ¶

![](https://pic4.zhimg.com/80/edd0080fb145315fbc96164c219fee7e_hd.jpg)

å®ƒå¯¹åˆå­¦è€…æ›´åŠ å‹å¥½ï¼ˆç›¸å¯¹äºreactï¼‰ï¼Œå®ƒæ˜¯åˆåˆ›å…¬å¸çš„é¦–é€‰æ¡†æ¶ï¼Œå®ƒæ˜¯è½»é‡çº§çš„ï¼Œæœ‰å¾ˆå¤šæ ¹æ®Vueæ‹“å±•çš„ç‹¬ç«‹çš„åŠŸèƒ½æˆ–åº“



## æ¦‚å¿µç‰¹æ€§

### å…¥é—¨æ¡ˆä¾‹

é¦–å…ˆå‚è€ƒå¦‚ä¸‹æ­¥éª¤ï¼Œåˆ›å»ºä¸€ä¸ªç®€å•çš„å…¥é—¨æ¡ˆä¾‹ï¼Œç„¶åä»è¿™ä¸ªæ¡ˆä¾‹ä¸­å­¦ä¹ Vueçš„åŸºæœ¬æ¦‚å¿µã€‚

åœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªé¡¹ç›®æ ¹ç›®å½•ï¼švue-oneï¼Œåœ¨æ ¹ç›®å½•ä¸‹å†åˆ›å»ºsrcæºä»£ç ç›®å½•ï¼Œå¹¶åœ¨å…¶ä¸­åˆ›å»ºå¦‚ä¸‹æ–‡ä»¶ã€‚

**vue.js**

å¯ä»¥ä»ä¸‹é¢åœ°å€ç›´æ¥å¼•å…¥vue.jsæ–‡ä»¶ï¼ˆæœ¬æ–‡ç‰ˆæœ¬ï¼šv2.7.15ï¼‰ï¼Œä¹Ÿå¯ä»¥ä¸‹è½½åˆ°æœ¬åœ°ä¹‹åå¼•å…¥ã€‚ä¸‹æ–‡é‡‡å–çš„æ˜¯æœ¬åœ°å¼•å…¥ã€‚

å¼€å‘ç¯å¢ƒï¼š`<script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>`

ç”Ÿäº§ç¯å¢ƒï¼š`<script src="https://cdn.jsdelivr.net/npm/vue@2"></script>`

**hello-world.html**

æ³¨æ„ï¼šå¦‚æœå¼•å…¥æœ¬åœ°vue.jsæ–‡ä»¶ï¼Œè¯·å°†ä¸‹è½½çš„vue.jsæ–‡ä»¶æ”¾åˆ°å¼•å…¥åœ°å€å¯¹åº”çš„ç›®å½•ä¸‹ã€‚

```html
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
        <!-- æ ¹å¯¹è±¡ --><!-- {{ message }}æ˜¯æ¨¡ç‰ˆ -->
		<div id="app">{{ message }}</div>
		<script src="vue.dev.js"></script>
		<script>
            //æ•°æ®å¯¹è±¡ç»‘å®šï¼Œè°ç”¨äº†æˆ‘ï¼Œæˆ‘æ”¹å˜äº†è¦é€šçŸ¥è°
			var vm = new Vue({
				el:"#app",
				data:{
					message:"hello world"
				},
			})

            //åŠ å…¥ä¸‹é¢è¿™æ®µï¼Œæ˜¾ç¤ºçš„å°±æ˜¯ï¼šhello world2
			//vm.message = "hello world2";
		</script>
	</body>
</html>
```

ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€demo.htmlï¼Œä¼šçœ‹åˆ°é¡µé¢æ˜¾ç¤ºï¼šhello worldã€‚



### JSå¯¹æ¯”æ¡ˆä¾‹

éƒ½è¯´Vueæ˜¯ä¸€ä¸ªæ¸è¿›å¼æ¡†æ¶ï¼Œå¯¹åˆå­¦è€…å‹å¥½ã€‚é‚£è¿™ä¸€ç‚¹ä½“ç°åœ¨å“ªé‡Œå‘¢ï¼Ÿä¸‹é¢å°†åˆ†åˆ«ç”¨jså’ŒVueå®ç°åŒä¸€ä¸ªåŠŸèƒ½ï¼Œå¹¶ä»ä¸­å¯¹æ¯”å‡ºæ¥Vueçš„ä¼˜åŠ¿ã€‚

æˆ‘å¼€å‘ä¸€ä¸ªé¡µé¢ï¼Œé»˜è®¤æ˜¾ç¤º0ï¼ŒæŒ‰åŠ æŒ‰é’®ä½¿æ•°å­—åŠ 1ï¼ŒæŒ‰å‡æŒ‰é’®å°†æ•°å­—å‡1ã€‚

JSå®ç°ï¼š

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>
        0
    </h1>
    <button>æŒ‰æˆ‘åŠ 1</button>
    <button id="btn">æŒ‰æˆ‘å‡1</button>
    <script>
       var elH1 = document.getElementsByTagName("h1")[0];
       var elBtn = document.getElementsByTagName("button")[0];
       var elBtn2 = document.getElementById("btn");
       var num = 0;
       elBtn.onclick = function() {
        num ++;
        elH1.innerHTML = num;
       }

       elBtn2.onclick = function() {
        num--;
        elH1.innerHTML = num;
        console.log(num)
       }
    </script>
</body>
</html>
```

å¯ä»¥çœ‹åˆ°ï¼Œjséœ€è¦é€šè¿‡æ–¹æ³•è¯»å–åˆ°å…ƒç´ çš„å€¼ï¼Œå½“æŒ‰é’®ç‚¹å‡»åï¼Œéœ€è¦ä¿®æ”¹å˜é‡çš„å€¼ï¼ŒåŒæ—¶è¿˜è¦å†™åˆ°å…ƒç´ ä¸­å»ã€‚æ¥ä¸‹æ¥æ˜¯Vueçš„å®ç°ï¼š

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="app">
        <h1>{{a}}</h1>
        <button @click="add">æŒ‰æˆ‘åŠ 1</button>
        <button @click="minus">æŒ‰æˆ‘å‡1</button>
    </div>
    <script src="../js/vue.dev.js"></script>
    <script>
        new Vue({
            // æŒ‚è½½ç‚¹
            el:'#app',
            // æ•°æ®
            data:{
                a: 0
            },
            // æ–¹æ³•
            methods: {
                add() {
                    this.a++
                },
                minus() {
                    this.a--
                }
            },
        })
    </script>
</body>
</html>
```

åŸºäºMVVMï¼ŒVueåªéœ€è¦å°†å…ƒç´ å’Œå˜é‡è¿›è¡Œç»‘å®šï¼Œå˜é‡çš„å€¼æ”¹å˜ä¹‹åå…ƒç´ çš„æ˜¾ç¤ºä¼šè‡ªåŠ¨æ”¹å˜ï¼Œæ˜æ˜¾å‡å°‘äº†ä»£ç é‡å’Œå¤æ‚åº¦ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä»–å¯¹åˆå­¦è€…æ¯”è¾ƒå‹å¥½çš„åŸå› ã€‚åŒæ—¶ç›®å‰ä»‹ç»çš„è¿™ç§ä½¿ç”¨æ–¹å¼æ˜¯åŸºäºä¼ ç»Ÿhtmlå’Œjsçš„ï¼Œè€é¡¹ç›®å¦‚æœä½¿ç”¨Vueï¼Œä¸éœ€è¦åšå¤§é‡æ”¹åŠ¨ï¼Œæ‰€ä»¥æ˜¯æ¸è¿›å¼çš„ã€‚



### Vueå¯¹è±¡

#### æ£€æŸ¥vueæ˜¯å¦å¼•ç”¨æˆåŠŸ

åœ¨ç¬¬ä¸€è¡Œä»£ç ä¸­ç›´æ¥alert(Vue)ï¼Œå¦‚æœå¼¹å‡ºæ¥ä¸€ä¸ªfunctionå°±ä»£è¡¨å¼•å…¥æˆåŠŸã€‚åä¹‹å°±éœ€è¦æ£€æŸ¥åœ°å€æ˜¯å¦ä¹¦å†™æ­£ç¡®ã€‚

```html
<body>
    <script src="../js/vue.js"></script>
    <script>
        alert(Vue)
    </script>
</body>
```

#### å…¥å‚è¯´æ˜

```html
<body>
    <div id="app">
        {{a}}
    </div>
    <script src="js/vue.js"></script>
    <script>
        var vue = new Vue({
            // æŒ‚è½½ç‚¹ï¼Œæ‰€æœ‰çš„Vueçš„æ–¹æ³•å’Œå±æ€§éƒ½å¿…é¡»åœ¨å¯¹åº”çš„æŒ‚è½½æ ¹æ ‡ç­¾å†…éƒ¨ä½¿ç”¨
            el: '#app',
            // æ•°æ®ç®¡ç†ä¸­å¿ƒï¼Œæ‰€æœ‰çš„Vueçš„æ•°æ®éƒ½åœ¨dataå¯¹è±¡ä¸­
            data:{
                a: 100
            },
            // æ–¹æ³•ï¼Œå¯¹åº”çš„Vueäº‹ä»¶æ–¹æ³•æ¸…å•
            methods:{

            },
            // ä¸‹é¢è¿™ä¸ªæ˜¯Vueå¯¹è±¡ä¸­ä¸å­˜åœ¨çš„ä¼šæŠ¥é”™ã€‚
            content:{
                b: 200
            }
        })
    </script>
</body>
```

#### æ’å€¼è¯­æ³•

æ’å€¼è¯­æ³•æ˜¯é€šè¿‡ä¸€å¯¹{{ }}è¿›è¡Œä¹¦å†™ï¼Œå†…éƒ¨æ˜¯å¯¹dataæ•°æ®ç®¡ç†ä¸­å¿ƒçš„å±æ€§è¿›è¡Œæ¸²æŸ“ï¼Œä¹Ÿå¯ä»¥æ˜¯è¡¨è¾¾å¼

moustacheï¼ˆèƒ¡å­ï¼‰æ˜¯åŒå¤§æ‹¬å·çš„å­¦åï¼Œä¹Ÿå«ï¼ˆèƒ¡å­è¯­æ³•ï¼‰

å†…éƒ¨ä¹Ÿå¯ä»¥å­˜æ”¾è¡¨è¾¾å¼

`{{a >= 100 ? 20 : 10}}`

æ³¨æ„ï¼Œè¡¨è¾¾å¼æ”¯æŒç®€å•ï¼Œæ¯”å¦‚ç®€å•åˆ¤æ–­ï¼Œæ¯”å¦‚ä¸‰å…ƒè¡¨è¾¾å¼ï¼Œä¸å¯ä»¥ä½¿ç”¨ifç­‰ç­‰å¤æ‚åˆ¤æ–­

~~{{if(a>200){a=100}else{a=300}}}~~

ä¸Šé¢çš„å†™æ³•æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºä¸æ”¯æŒä½¿ç”¨å¤æ‚åˆ¤æ–­



### ç”Ÿå‘½å‘¨æœŸ

#### ä»€ä¹ˆæ˜¯ç”Ÿå‘½å‘¨æœŸ

VUEçš„ç»„ä»¶ä»åˆ›å»ºåˆ°é”€æ¯çš„æ•´ä¸ªè¿‡ç¨‹å°±æ˜¯ç”Ÿå‘½å‘¨æœŸã€‚å…¶ä½œç”¨å°±æ˜¯åœ¨ç‰¹å®šçš„æ—¶é—´ç‚¹æ‰§è¡Œç‰¹å®šçš„æ“ä½œã€‚

ä¾‹å¦‚ï¼šç»„ä»¶åˆ›å»ºå®Œæ¯•åï¼Œå¯ä»¥åœ¨created ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­å‘èµ·Ajax è¯·æ±‚ï¼Œä»è€Œåˆå§‹åŒ– data æ•°æ®



#### ç”Ÿå‘½å‘¨æœŸå›¾è§£

![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/695886110ed7476781fa021829dcc513~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

#### åˆ†ç±»è§£æ

**4å¤§é˜¶æ®µ**

- åˆå§‹åŒ–
- æŒ‚è½½
- æ›´æ–°
- é”€æ¯

**8ä¸ªæ–¹æ³•**

| **é’©å­å‡½æ•°**   | **è§¦å‘çš„è¡Œä¸º**                                               | **åœ¨æ­¤é˜¶æ®µå¯ä»¥åšçš„äº‹æƒ…**                            |
| -------------- | ------------------------------------------------------------ | --------------------------------------------------- |
| beforeCreadted | vueå®ä¾‹çš„æŒ‚è½½å…ƒç´ $elå’Œæ•°æ®å¯¹è±¡dataéƒ½ä¸ºundefinedï¼Œè¿˜æœªåˆå§‹åŒ–ã€‚ | åŠ loadingäº‹ä»¶                                       |
| created        | vueå®ä¾‹çš„æ•°æ®å¯¹è±¡dataæœ‰äº†ï¼Œ$elè¿˜æ²¡æœ‰                         | ç»“æŸloadingã€è¯·æ±‚æ•°æ®ä¸ºmountedæ¸²æŸ“åšå‡†å¤‡            |
| beforeMount    | vueå®ä¾‹çš„$elå’Œdataéƒ½åˆå§‹åŒ–äº†ï¼Œä½†è¿˜æ˜¯è™šæ‹Ÿçš„domèŠ‚ç‚¹ï¼Œå…·ä½“çš„data.filterè¿˜æœªæ›¿æ¢ã€‚ |                                                     |
| mounted        | vueå®ä¾‹æŒ‚è½½å®Œæˆï¼Œdata.filteræˆåŠŸæ¸²æŸ“                         | é…åˆè·¯ç”±é’©å­ä½¿ç”¨                                    |
| beforeUpdate   | dataæ›´æ–°æ—¶è§¦å‘                                               |                                                     |
| updated        | dataæ›´æ–°æ—¶è§¦å‘                                               | æ•°æ®æ›´æ–°æ—¶ï¼Œåšä¸€äº›å¤„ç†ï¼ˆæ­¤å¤„ä¹Ÿå¯ä»¥ç”¨watchè¿›è¡Œè§‚æµ‹ï¼‰ |
| beforeDestroy  | ç»„ä»¶é”€æ¯æ—¶è§¦å‘                                               |                                                     |
| destroyed      | ç»„ä»¶é”€æ¯æ—¶è§¦å‘ï¼Œvueå®ä¾‹è§£é™¤äº†äº‹ä»¶ç›‘å¬ä»¥åŠå’Œdomçš„ç»‘å®šï¼ˆæ— å“åº”äº†ï¼‰ï¼Œä½†DOMèŠ‚ç‚¹ä¾æ—§å­˜åœ¨ | ç»„ä»¶é”€æ¯æ—¶è¿›è¡Œæç¤º                                  |



#### æµ‹è¯•ä»£ç 

åœ¨srcç›®å½•ä¸­åˆ›å»ºlifecycle.htmlï¼Œå†…å®¹å¦‚ä¸‹ï¼š

```html
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title></title>
</head>
<body>
<!-- æ ¹å¯¹è±¡ --><!-- {{ message }}æ˜¯æ¨¡ç‰ˆ -->
<div id="app">{{ message }}</div>
<script src="vue.dev.js"></script>
<script>
	//æ•°æ®å¯¹è±¡ç»‘å®šï¼Œè°ç”¨äº†æˆ‘ï¼Œæˆ‘æ”¹å˜äº†è¦é€šçŸ¥è°
	var vm = new Vue({
		el:"#app",
		data:{
			message:"lifecycle test"
		},beforeCreate: function() {
			console.group('------beforeCreateåˆ›å»ºå‰çŠ¶æ€------');
			console.log("%c%s", "color:red" , "el     : " + this.$el); //undefined
			console.log("%c%s", "color:red","data   : " + this.$data); //undefined
			console.log("%c%s", "color:red","message: " + this.message)
		},
		created: function() {
			console.group('------createdåˆ›å»ºå®Œæ¯•çŠ¶æ€------');
			console.log("%c%s", "color:red","el     : " + this.$el); //undefined
			console.log("%c%s", "color:red","data   : " + this.$data); //å·²è¢«åˆå§‹åŒ–
			console.log("%c%s", "color:red","message: " + this.message); //å·²è¢«åˆå§‹åŒ–
		},
		beforeMount: function() {
			console.group('------beforeMountæŒ‚è½½å‰çŠ¶æ€------');
			console.log("%c%s", "color:red","el     : " + (this.$el)); //å·²è¢«åˆå§‹åŒ–
			console.log(this.$el);
			console.log("%c%s", "color:red","data   : " + this.$data); //å·²è¢«åˆå§‹åŒ–
			console.log("%c%s", "color:red","message: " + this.message); //å·²è¢«åˆå§‹åŒ–
		},
		mounted: function() {
			console.group('------mounted æŒ‚è½½ç»“æŸçŠ¶æ€------');
			console.log("%c%s", "color:red","el     : " + this.$el); //å·²è¢«åˆå§‹åŒ–
			console.log(this.$el);
			console.log("%c%s", "color:red","data   : " + this.$data); //å·²è¢«åˆå§‹åŒ–
			console.log("%c%s", "color:red","message: " + this.message); //å·²è¢«åˆå§‹åŒ–
		},
		beforeUpdate: function () {
			console.group('beforeUpdate æ›´æ–°å‰çŠ¶æ€===============ã€‹');
			console.log("%c%s", "color:red","el     : " + this.$el);
			console.log(this.$el);
			console.log("%c%s", "color:red","data   : " + this.$data);
			console.log("%c%s", "color:red","message: " + this.message);
		},
		updated: function () {
			console.group('updated æ›´æ–°å®ŒæˆçŠ¶æ€===============ã€‹');
			console.log("%c%s", "color:red","el     : " + this.$el);
			console.log(this.$el);
			console.log("%c%s", "color:red","data   : " + this.$data);
			console.log("%c%s", "color:red","message: " + this.message);
		},
		beforeDestroy: function () {
			console.group('beforeDestroy é”€æ¯å‰çŠ¶æ€===============ã€‹');
			console.log("%c%s", "color:red","el     : " + this.$el);
			console.log(this.$el);
			console.log("%c%s", "color:red","data   : " + this.$data);
			console.log("%c%s", "color:red","message: " + this.message);
		},
		destroyed: function () {
			console.group('destroyed é”€æ¯å®ŒæˆçŠ¶æ€===============ã€‹');
			console.log("%c%s", "color:red","el     : " + this.$el);
			console.log(this.$el);
			console.log("%c%s", "color:red","data   : " + this.$data);
			console.log("%c%s", "color:red","message: " + this.message)
		}
	})
</script>
</body>
</html>
```

ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€lifecycle.htmlï¼Œä¼šçœ‹åˆ°é¡µé¢æ˜¾ç¤ºï¼šlifecycle testã€‚æŒ‰f12ï¼Œæ‰“å¼€æ§åˆ¶å°ï¼Œè§‚å¯Ÿæ—¥å¿—æ‰“å°ã€‚

ä¸Šæ–‡å‚è€ƒé“¾æ¥ï¼šhttps://juejin.cn/post/7024074527420203044



## åŸºæœ¬ä½¿ç”¨

### æŒ‡ä»¤

æŒ‡ä»¤çš„è‹±æ–‡ï¼šdirectiveï¼ŒvueæŒ‡ä»¤çš„ä½œç”¨æ˜¯é€šè¿‡å¸¦æœ‰v-çš„ç‰¹æ®Šå±æ€§ï¼Œå®ç°å¯¹domçš„å“åº”å¼åŠ è½½

#### v-if

v-ifçš„ä½œç”¨æ˜¯é€šè¿‡ä¸€ä¸ªå¸ƒå°”è¡¨è¾¾å¼è¿›è¡Œå¯¹domçš„ä¸Šæ ‘å’Œä¸‹æ ‘çš„æ¸²æŸ“

åŸºæœ¬ä½¿ç”¨ï¼šå¦‚ä¸‹2ä¸ªpå…ƒç´ ï¼Œåªæœ‰trueçš„é‚£ä¸ªä¼šæ˜¾ç¤ºï¼š

```html
<p v-if="false">æˆ‘æ˜¯ç¬¬ä¸€è¡Œdomå…ƒç´ </p>
<p v-if="true">æˆ‘æ˜¯ç¬¬äºŒè¡Œdomå…ƒç´ </p>
```

![image-20231221223100101](å­¦ä¹ ç¬”è®°-å‰ç«¯-Gem.assets/image-20231221223100101.png)

å®é™…å·¥ä½œä¸­ï¼Œä¸ä¼šç›´æ¥ä½¿ç”¨å¸ƒå°”å€¼è¿›è¡Œåˆ¤æ–­ï¼Œé€šå¸¸ä¼šæ˜¯ä¸€ä¸ªå˜é‡ã€‚å¯ä»¥é€šè¿‡åå°è¯·æ±‚è¿”å›ã€‚

```html
<body>
    <div id="app">
        <p v-if="boo">æˆ‘æ˜¯ç¬¬ä¸€è¡Œdomå…ƒç´ </p>
        <p v-if="!boo">æˆ‘æ˜¯ç¬¬äºŒè¡Œdomå…ƒç´ </p>
    </div>
    <script src="js/vue.js"></script>
    <script>
        var vue = new Vue({
            el: '#app',
            data:{
                boo: false
            }
        })
    </script>
</body>

```

ç¬¬äºŒç§æƒ…å†µæ˜¯é€šè¿‡ä½¿ç”¨è¡¨è¾¾å¼è¿›è¡Œé€»è¾‘åˆ¤æ–­

```html
<body>
<div id="app">
    	//å½“booçš„å€¼ç­‰äº100çš„æ—¶å€™å†æ˜¾ç¤º
        <p v-if="boo == 100">æˆ‘æ˜¯ç¬¬ä¸€è¡Œdomå…ƒç´ </p>
        <button @click="add">æŒ‰æˆ‘åŠ 1</button>
    </div>
    <script src="js/vue.js"></script>
    <script>
        var vue = new Vue({
            el: '#app',
            data:{
                boo: 95
            },
            methods:{
                add(){
                    this.boo++
                }
            }
        })
    </script>
</body>

```

v-ifçš„æ˜¾ç¤ºæ ¹æœ¬åŸç†ä¸€ä¸ªæ˜¯é€šè¿‡å¯¹å€¼çš„éšå¼è½¬æ¢ï¼Œä¸€ä¸ªå°±æ˜¯é€šè¿‡å¯¹è¡¨è¾¾å¼çš„åˆ¤æ–­å¾—å‡ºçš„å¸ƒå°”å€¼å¾—æ¥çš„

å°†æ¡ˆä¾‹è¿›è¡Œæ·±å…¥æ¼”å˜ï¼š

```html
<body>
    <div id="app">
        <h2>{{boo}}</h2>
        <p v-if='boo >= 0 && boo <= 5'>æˆ‘æ˜¯5</p>
        <p v-if='boo >= 6 && boo <= 10'>æˆ‘æ˜¯10</p>
        <p v-if='boo >= 11 && boo <= 15'>æˆ‘æ˜¯15</p>
        <p v-if='boo >= 16 && boo <= 20'>æˆ‘æ˜¯20</p>
        <p v-if="boo > 20">æˆ‘æ˜¯å¤§äº20</p>
        <button @click="add">æŒ‰æˆ‘åŠ 1</button>
    </div>
    <script src="js/vue.js"></script>
    <script>
        var vue = new Vue({
            el: '#app',
            data:{
                boo: 0
            },
            methods:{
                add(){
                    this.boo++
                }
            }
        })
    </script>
</body>
```

ä¸Šé¢çš„ä»£ç è¿˜å¯ä»¥é€šè¿‡v-else-ifå’Œv-elseè¿›è¡Œåˆ†æ”¯åˆ¤æ–­ï¼š

```html
<p v-if='boo >= 0 && boo <= 5'>æˆ‘æ˜¯5</p>
<p v-else-if='boo >= 6 && boo <= 10'>æˆ‘æ˜¯10</p>
<p v-else-if='boo >= 11 && boo <= 15'>æˆ‘æ˜¯15</p>
<p v-else-if='boo >= 16 && boo <= 20'>æˆ‘æ˜¯20</p>
<p v-else="boo > 20">æˆ‘æ˜¯å¤§äº20</p>
```

éœ€è¦æ³¨æ„çš„æ˜¯v-elseçš„ä½¿ç”¨å‰ææ˜¯å¿…é¡»å…ˆæœ‰v-ifå¹¶ä¸”ä¸­é—´ä¸å…è®¸æœ‰ä»»ä½•çš„å…ƒç´ é—´éš”ï¼Œä¸‹é¢çš„æ¡ˆä¾‹å°±æ˜¯é”™è¯¯çš„ã€‚

```html
<p v-if='boo >= 0 && boo <= 5'>æˆ‘æ˜¯5</p>
<div></div>
<p v-else="boo > 20">æˆ‘æ˜¯å¤§äº20</p>
```

ä¸Šé¢çš„ä»£ç å†™æ³•æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºdivä¸èƒ½å†v-ifå’Œv-elseä¹‹é—´è¿›è¡Œæ‹†åˆ†ï¼Œæ­£ç¡®çš„å†™æ³•ï¼š

```html
<p v-if='boo >= 0 && boo <= 5'>æˆ‘æ˜¯5</p>
<p v-else="boo > 20">æˆ‘æ˜¯å¤§äº20</p>
```

#### v-show

v-showå’Œv-ifçš„æ˜¾ç¤ºæƒ…å†µç±»ä¼¼ï¼Œä½†æ˜¯åŸç†ä¸ä¸€æ ·ï¼Œv-showæ˜¯é€šè¿‡æ§åˆ¶å…ƒç´ çš„displayå±æ€§ï¼Œå¯¹å…ƒç´ çš„æ˜¾ç¤ºå’Œéšè—è¿›è¡Œé€»è¾‘åˆ¤æ–­ï¼Œä½†å…ƒç´ æœ¬èº«è¿˜æ˜¯åœ¨Domæ ‘ä¸­çš„ã€‚

```html
<body>
    <div id="app">
        <p v-show='boo >= 5'>æˆ‘æ˜¯5</p>
        <button @click="add">æŒ‰æˆ‘åŠ 1</button>
    </div>
    <script src="js/vue.js"></script>
    <script>
        var vue = new Vue({
            el: '#app',
            data:{
                boo: 0
            },
            methods:{
                add(){
                    this.boo++
                }
            }
        })
    </script>
</body>
```

å®é™…æ•ˆæœï¼š

![image-20231221224319519](å­¦ä¹ ç¬”è®°-å‰ç«¯-Gem.assets/image-20231221224319519.png)

ä½¿ç”¨åœºæ™¯

v-showå’Œv-ifçš„ä½¿ç”¨åœºæ™¯åŒºåˆ†æ˜¯å¦‚æœé¡µé¢åˆ‡æ¢çš„ç‰¹åˆ«é¢‘ç¹ä½¿ç”¨v-showï¼Œå¦‚æœé¡µé¢çš„æ¶‰åŠèŒƒå›´ç‰¹åˆ«å¤§å¹¶ä¸”ä¸æ˜¯ç‰¹åˆ«é¢‘ç¹çš„åˆ‡æ¢ä½¿ç”¨v-ifï¼Œå› ä¸ºä¸»è¦åŒºåˆ†æ˜¯æ¶‰åŠåˆ°é¡µé¢çš„åŠ è½½æ€§èƒ½ã€‚



#### v-for

##### v-foréå†æ•°ç»„

v-foræ˜¯vueçš„å¾ªç¯æŒ‡ä»¤ï¼Œä½œç”¨æ˜¯éå†æ•°ç»„ï¼ˆå¯¹è±¡ï¼‰çš„æ¯ä¸€ä¸ªå€¼ã€‚

v-forè¿˜æœ‰indexå’Œkeyå±æ€§

`<li v-for="(item,index) in arr" :key="index">{{index}}-{{item}}</li>`

itemæŒ‡çš„æ˜¯è¢«éå†çš„æ•°ç»„ï¼ˆå¯¹è±¡ï¼‰çš„æ¯ä¸€ä¸ªå€¼ï¼Œitemçš„å‘½åä¸æ˜¯è§„å®šçš„ï¼Œå¯ä»¥è‡ªå®šä¹‰å‘½å

indexæŒ‡çš„æ˜¯æ¯ä¸€é¡¹è¢«éå†çš„å€¼çš„ä¸‹æ ‡ç´¢å¼•å€¼

keyæ˜¯ç”¨æ¥ç»™æ¯ä¸€é¡¹å€¼åŠ å…ƒç´ æ ‡è¯†ï¼Œä½œç”¨æ˜¯ä¸ºäº†åŒºåˆ†å…ƒç´ ï¼Œä¸ºäº†å®ç°æœ€å°é‡çš„æ›´æ–°

ä½¿ç”¨æ¡ˆä¾‹ï¼š

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="app">
        <ul>
            <li v-for="(item,index) in arr" :key="index">{{index}}-{{item}}</li>
        </ul>
    </div>
    <script src = "../js/vue.dev.js"></script>
    <script>
        var vue = new Vue({
            el: "#app",
            data: {
                arr: [
                    'è‹¹æœ',
                    'æ©˜å­',
                    'é¦™è•‰',
                    'è‰è“'
                ]
            }
        })
    </script>
</body>
</html>
```

æ˜¾ç¤ºæ•ˆæœï¼š

![image-20231221225205480](å­¦ä¹ ç¬”è®°-å‰ç«¯-Gem.assets/image-20231221225205480.png)

##### v-foréå†å¯¹è±¡

`<li v-for="(item,key,index) in obj" :key="index">{{index}}-{{key}}:{{item}}</li>`

ä¸Šé¢çš„v-forä¸€å…±æœ‰ä¸‰ä¸ªå‚æ•°

itemè¡¨ç¤ºå¯¹è±¡çš„å†…å®¹ï¼Œ

keyè¡¨ç¤ºçš„æ˜¯å¯¹è±¡keyé”®å€¼åç§°

indexè¡¨ç¤ºçš„æ˜¯å½“å‰objçš„ä¸‹æ ‡ç´¢å¼•å€¼

æ¡ˆä¾‹ä»£ç ï¼š

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="app">
        <ul>
            <li v-for="(item,key,index) in obj" :key="index">{{index}}-{{key}}:{{item}}</li>
        </ul>
    </div>
    <script src = "../js/vue.dev.js"></script>
    <script>
        var vue = new Vue({
            el: "#app",
            data: {
                obj:{
                    name: 'å°æ˜',
                    age: '17å²',
                    height: '175cm',
                    sex: 'ç”·',
                    hobby: 'æ‰“ç¯®çƒ'
                }
            }
        })
    </script>
</body>
</html>
```

![image-20231221225926389](å­¦ä¹ ç¬”è®°-å‰ç«¯-Gem.assets/image-20231221225926389.png)

##### v-foréå†æ•°ç»„å¯¹è±¡

å®é™…å·¥ä½œä¸­æˆ‘ä»¬æ›´å¤šçš„æ˜¯ç”¨v-foréå†Jsonæ•°ç»„ï¼Œæ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ éƒ½æ˜¯å¯¹è±¡

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        table,td,th{
            border: 1px solid #111;
            border-collapse: collapse;
        }
    </style>
</head>
<body>
    <div id="app">
        <table>
            <tr>
                <th>å§“å</th>
                <th>å¹´é¾„</th>
                <th>æ€§åˆ«</th>
                <th>èº«é«˜</th>
            </tr>
            <tr v-for="(item,index) in arr">
                <!-- JOSNä¸­çš„å§“å -->
                <td>{{item.name}}</td>
                <!-- JOSNä¸­çš„å¹´é¾„ -->
                <td>{{item.age}}</td>
                <!-- JOSNä¸­çš„æ€§åˆ« -->
                <td>{{item.sex}}</td>
                <!-- JOSNä¸­çš„èº«é«˜ -->
                <td>{{item.height}}</td>
            </tr>
        </table>
    </div>
    <script src = "../js/vue.dev.js"></script>
    <script>
        var vue = new Vue({
            el: "#app",
            data: {
                arr: [
                    {name:'å°æ˜',age: '17',sex:'ç”·',height: '168'},
                    {name:'å°çº¢',age: '18',sex:'å¥³',height: '165'},
                    {name:'å°å‘¨',age: '19',sex:'ç”·',height: '178'},
                    {name:'å°åˆš',age: '20',sex:'ç”·',height: '167'}
                ]
            }
        })
    </script>
</body>
</html>
```

æ˜¾ç¤ºæ•ˆæœï¼š

![image-20231221230139841](å­¦ä¹ ç¬”è®°-å‰ç«¯-Gem.assets/image-20231221230139841.png)

##### v-foråµŒå¥—éå†

v-forè¿˜å¯ä»¥è¿›è¡ŒåµŒå¥—éå†ï¼Œå°±æ˜¯å¤šå±‚forå¾ªç¯

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        table,td,th{
            border: 1px solid #111;
            border-collapse: collapse;
        }
    </style>
</head>
<body>
    <div id="app">
        <table>
            <tr v-for="i in number" :key="i">
                <td v-for="j in i" :key="j">{{i}}X{{j}}={{i*j}}</td>
            </tr>
        </table>
    </div>
    <script src = "../js/vue.dev.js"></script>
    <script>
        var vue = new Vue({
            el: "#app",
            data: {
                number:[1,2,3,4,5,6,7,8,9]
            }
        })
    </script>
</body>
</html>
```

æ˜¾ç¤ºæ•ˆæœï¼š

![image-20231221230335371](å­¦ä¹ ç¬”è®°-å‰ç«¯-Gem.assets/image-20231221230335371.png)



#### v-html, v-text

v-htmlå’Œv-textéƒ½æ˜¯æ¸²æŸ“æ–‡æœ¬çš„æŒ‡ä»¤ï¼Œåªæ˜¯ä½¿ç”¨åœºæ™¯æœ‰æ‰€ä¸åŒ

v-textå’ŒåŒå¤§æ‹¬å·æ’å€¼ï¼š{{}}ç±»ä¼¼ï¼Œéƒ½æ˜¯å°†æ•°æ®ä»¥æ–‡æœ¬çš„æ–¹å¼è¾“å‡ºï¼ˆå³ä½¿é‡Œé¢åŒ…å«htmlè¯­æ³•ï¼‰ä»–ä¸¤çš„åŒºåˆ«æ˜¯

- ä½¿ç”¨{{}}ï¼Œé¡µé¢ä¼šæœ‰ä¸€ä¸ªå¾ˆçŸ­æš‚çš„æ—¶é—´è¾“å‡ºè§£æä¹‹å‰çš„å€¼ã€‚ä½†æ˜¯v-textä¸ä¼šã€‚
- ä½¿ç”¨{{}}ï¼Œå¦‚æœä»–å‘¨å›´è¿˜æœ‰å…¶ä»–å…¶ä»–å€¼ä¹Ÿä¼šä¸€èµ·è¾“å‡ºï¼Œä¾‹å¦‚`---{{a}}---`ã€‚v-textåˆ™åªä¼šè¾“å‡ºå˜é‡çš„å€¼ã€‚

v-htmlå°±å’Œä¸Šé¢çš„ä¸åŒç‚¹æ˜¯ï¼šä»–å°†ä½œä¸ºinnerHTMLå±æ€§è¾“å‡ºï¼Œå¦‚æœåŒ…å«htmlè¯­æ³•åˆ™è¾“å‡ºhtmlå…ƒç´ ã€‚

v-htmlå’Œv-textç±»ä¼¼çš„æ˜¯v-htmlä¹Ÿä¸å…è®¸åœ¨å…ƒç´ ä¸­é—´éšæ„æ’å€¼ã€‚

å‚è€ƒä»£ç ï¼š

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>

    </style>
</head>
<body>
    <div id="app">
        <p>-----------{{a}}------------</p>
        <p v-text="a">--------------------</p>
        <p v-html='a'>--------------</p>
    </div>
    <script src = "../js/vue.dev.js"></script>
    <script>
        var vue = new Vue({
            el: "#app",
            data: {
                a:'<h1>æˆ‘æ˜¯è¦æ’å€¼çš„å†…å®¹</h1>'
            }
        })
    </script>
</body>
</html>
```

æ˜¾ç¤ºæ•ˆæœï¼š

![image-20231222174232899](å­¦ä¹ ç¬”è®°-å‰ç«¯-Gem.assets/image-20231222174232899.png)

#### v-cloak

å¯ä»¥ä½¿ç”¨ v-cloak æŒ‡ä»¤è®¾ç½®æ ·å¼ï¼Œè¿™äº›æ ·å¼ä¼šåœ¨ Vue å®ä¾‹ç¼–è¯‘ç»“æŸæ—¶ï¼Œä»ç»‘å®šçš„ HTML å…ƒç´ ä¸Šè¢«ç§»é™¤ã€‚

å½“ç½‘ç»œè¾ƒæ…¢ï¼Œç½‘é¡µè¿˜åœ¨åŠ è½½ Vue.js ï¼Œè€Œå¯¼è‡´ Vue æ¥ä¸åŠæ¸²æŸ“ï¼Œè¿™æ—¶é¡µé¢å°±ä¼šæ˜¾ç¤ºå‡º Vue æºä»£ç ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ v-cloak æŒ‡ä»¤é…åˆCSSæ¥è§£å†³è¿™ä¸€é—®é¢˜ã€‚

åœ¨ç®€å•é¡¹ç›®ä¸­ï¼Œä½¿ç”¨  v-cloak æŒ‡ä»¤æ˜¯è§£å†³å±å¹•é—ªåŠ¨çš„å¥½æ–¹æ³•ã€‚ä½†åœ¨å¤§å‹ã€å·¥ç¨‹åŒ–çš„é¡¹ç›®ä¸­ï¼ˆwebpackã€vue-routerï¼‰åªæœ‰ä¸€ä¸ªç©ºçš„ div å…ƒç´ ï¼Œå…ƒç´ ä¸­çš„å†…å®¹æ˜¯é€šè¿‡è·¯ç”±æŒ‚è½½æ¥å®ç°çš„ï¼Œè¿™æ—¶æˆ‘ä»¬å°±ä¸éœ€è¦ç”¨åˆ° v-cloak æŒ‡ä»¤ã€‚

å‚è€ƒä»£ç ï¼š

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        [v-clock]{
            display: none;
        }
    </style>
</head>
<body>
    <div id="app" v-clock>
        {{a}}
    </div>
    <script src = "../js/vue.dev.js"></script>
    <script>
        var vue = new Vue({
            el: "#app",
            data: {
                a:'æˆ‘æ˜¯æ¸²æŸ“çš„æŒ‡ä»¤-v-cloak'
            }
        })
    </script>
</body>
</html>
```



#### v-once

v-onceçš„ä½œç”¨æ˜¯åªä¼šæ¸²æŸ“å¯¹åº”å…ƒç´ ä¸€æ¬¡ï¼Œæ•°æ®æ›´æ–°ä¸ä¼šå¼•èµ·è§†å›¾çš„æ›´æ–°ï¼Œç›®çš„æ˜¯ä¸ºäº†ä¼˜åŒ–é¡µé¢çš„æ€§èƒ½

æ¡ˆä¾‹ï¼š

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        
    </style>
</head>
<body>
    <div id="app" v-clock>
        <h2 v-once>{{a}}</h2>
        <button @click="add">æŒ‰æˆ‘åŠ 1</button>
        <button @click="minus">æŒ‰æˆ‘å‡1</button>
    </div>
    <script src = "../js/vue.dev.js"></script>
    <script>
        var vue = new Vue({
            el: "#app",
            data: {
                a: 100
            },
            // äº‹ä»¶æ–¹æ³•
            methods:{
                add() {
                    this.a ++
                    console.log(this.a)
                },
                minus() {
                    this.a --
                    console.log(this.a)
                }
            }
        })
    </script>
</body>
</html>
```

é¡µé¢æ‰“å¼€åä¼šå‘ç°ï¼Œç‚¹å‡»æŒ‰é’®å¹¶ä¸ä¼šå¯¼è‡´é¡µé¢æ˜¾ç¤ºå€¼çš„å˜åŒ–ï¼Œä½†æ˜¯å˜é‡çš„å€¼è¿˜æ˜¯åœ¨å˜åŒ–ã€‚

ä½¿ç”¨åœºæ™¯é€šå¸¸æ˜¯æ²¡æœ‰åŠ¨æ€çš„å…ƒç´ å†…å®¹ï¼Œæ¯”å¦‚ä¸€äº›æ–‡ç« ï¼Œä¸€äº›å›ºå®šæ ‡é¢˜



#### v-pre

v-preå±æ€§çš„ä½œç”¨æ˜¯è·³è¿‡è¯¥å…ƒç´ ç¼–è¯‘è¿‡ç¨‹ï¼Œç›´æ¥æ˜¾ç¤ºå…ƒç´ å†…éƒ¨çš„æ–‡æœ¬ï¼Œç‰¹ç‚¹å°±æ˜¯è·³è¿‡å¤§é‡çš„æ²¡æœ‰æŒ‡ä»¤çš„èŠ‚ç‚¹ã€‚ç›®çš„å°±æ˜¯ä¼˜åŒ–é¡µé¢çš„åŠ è½½æ€§èƒ½ã€‚

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        
    </style>
</head>
<body>
    <div id="app" v-clock>
        <h2 v-pre>{{a}}</h2>
    </div>
    <script src = "../js/vue.dev.js"></script>
    <script>
        var vue = new Vue({
            el: "#app",
            data: {
                a: 100
            }
        })
    </script>
</body>
</html>
```



#### v-on

v-onçš„ä½œç”¨æ˜¯ç»™å…ƒç´ æ·»åŠ äº‹ä»¶ç›‘å¬ï¼Œå¯ä»¥ç®€å†™ä¸º@ã€‚

JavaScriptçš„å…ƒç´ çš„äº‹ä»¶ç›‘å¬éƒ½å¯ä»¥åœ¨vueä¸­ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼š

| äº‹ä»¶åç§° | æ–¹æ³•         |
| -------- | ------------ |
| ç‚¹å‡»     | onclick      |
| åŒå‡»     | ondblclick   |
| é¼ æ ‡ç§»ä¸Š | onmouseenter |
| é¼ æ ‡ç¦»å¼€ | onmouseleave |
| é¼ æ ‡æ»‘è¿‡ | onmousemove  |
| é¼ æ ‡ç§»é™¤ | onmouseout   |
| å¤±å»ç„¦ç‚¹ | onblur       |
| èšç„¦     | onfocus      |
| é”®ç›˜äº‹ä»¶ | onkeydown    |

åœ¨vueä¸­çš„ä½¿ç”¨æ˜¯ä¸€å¾‹å»é™¤å‰é¢onï¼Œç„¶ååŠ v-onï¼šæˆ–è€…@ã€‚

ä¾‹å¦‚ï¼šå•å‡»æ˜¯`@click`æˆ–`v-on:click`

éœ€è¦æ³¨æ„çš„æ˜¯ï¼š

- æ‰€æœ‰äº‹ä»¶è°ƒç”¨çš„æ–¹æ³•éƒ½å¿…é¡»å†™åœ¨vueçš„methodsä¸­ï¼Œä¸å…è®¸å†™åœ¨å…¶ä»–åœ°æ–¹ã€‚
- ä¸å…è®¸ä½¿ç”¨JavaScriptçš„äº‹ä»¶æ–¹æ³•è°ƒç”¨Vueçš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼š`onclick="add"`
- å¦‚æœmethodä¸­å­˜åœ¨å¤šä¸ªé‡åæ–¹æ³•ï¼Œé‚£æœ€ä¸‹é¢çš„ä¼šè¦†ç›–ä¸Šé¢çš„ã€‚
- æ–¹æ³•æ˜¯æ”¯æŒä¼ å…¥å‚æ•°çš„ã€‚ä¾‹å¦‚ï¼šadd(5)ã€‚å¦‚æœä¸å®šä¹‰å‚æ•°ï¼Œé»˜è®¤çš„å…¥å‚æ˜¯event

å‚è€ƒä»£ç ï¼š

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        
    </style>
</head>
<body>
    <div id="app" v-clock>
        <h2 >{{a}}</h2>
        <button @click="add">ç‚¹å‡»åŠ 1</button>
    </div>
    <script src = "../js/vue.dev.js"></script>
    <script>
        var vue = new Vue({
            el: "#app",
            data: {
                a: 100
            },
            methods:{
                add(event) {
                    console.log(event)
                }
            }
        })
    </script>
</body>
</html>
```



#### v-bind

v-bindå±æ€§çš„ä½œç”¨æ˜¯å°†æ™®é€šçš„htmlå±æ€§å˜ä¸ºåŠ¨æ€å±æ€§ï¼Œè®©å±æ€§å…·æœ‰åŠ¨æ€èƒ½åŠ›ã€‚

ä¾‹å¦‚ï¼š`<img src="'images/'+url+'.jpg'" alt="">`è¿™æ®µä»£ç çš„æ„å›¾æ˜¯å°†urlå½“æˆä¸€ä¸ªå˜é‡æ˜¯çš„å›¾ç‰‡å¯ä»¥åŠ¨æ€æ˜¾ç¤ºã€‚ä½†å®é™…ä¸ä¼šã€‚éœ€è¦æ”¹æˆè¿™æ ·æ‰è¡Œï¼š`<img v-bind:src="'images/'+url+'.jpg'" alt="">`ã€‚æ­¤æ—¶vueä¼šç¼–è¯‘å¸¦æœ‰v-bindçš„å±æ€§ï¼Œç„¶åè¿”å›ç¼–è¯‘åç»“æœã€‚

å¯ä»¥å°†v-bind:ç®€å†™ä¸ºï¼šä¹Ÿå°±æ˜¯ï¼š`<img :src="'images/'+url+'.jpg'" alt="">`ã€‚

éœ€è¦æ³¨æ„çš„æ˜¯åŠ¨æ€çš„classå¿…é¡»è¦ä½¿ç”¨{}å»åŒ…è£¹ï¼Œå€¼å¯ä»¥æœ‰å¤šä¸ªï¼Œå€¼çš„å‚æ•°æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        p{
            width: 200px;
            height: 200px;
            background: blue;
        }
        .red{
            background:red;
        }
        .pink{
            background: pink;
        }
    </style>
</head>
<body>
    <div id="app" v-clock>
        <div>
            <p :style="{width:b+'px'}">
                {{a}}
            </p>
        </div>
        <button @click="add">ç‚¹å‡»åŠ 1</button>
        <button @click="minus">ç‚¹å‡»å‡1</button>
    </div>
    <script src = "../js/vue.dev.js"></script>
    <script>
        var vue = new Vue({
            el: "#app",
            data: {
                a: 0,
                b: 100
            },
            methods:{
                add(event) {
                    this.b ++
                },
                minus(){
                    this.a --
                }
            }
        })
    </script>
</body>
</html>
```



#### v-model

v-modelå±æ€§æ˜¯ä½¿ç”¨åœ¨è¡¨å•å…ƒç´ ä¸­çš„ï¼Œä½œç”¨æ˜¯å®ç°è¡¨å•å’Œæ•°æ®çš„åŒå‘ç»‘å®šã€‚

vueæ˜¯mvvmæ¡†æ¶ï¼Œå…¶æ ¸å¿ƒä¹‹ä¸€å°±æ˜¯åŒå‘æ•°æ®ç»‘å®šã€‚å½“htmlå…ƒç´ å’Œå˜é‡è¿›è¡Œç»‘å®šæ—¶ï¼Œå½“å˜é‡æ”¹å˜htmlå…ƒç´ çš„å€¼ä¹Ÿä¼šè‡ªåŠ¨æ”¹å˜ï¼Œè€Œv-modelçš„ä½œç”¨å°±æ˜¯å®ç°å¦ä¸€åŠï¼Œå³å½“htmlå…ƒç´ å€¼æ”¹å˜æ—¶è‡ªåŠ¨ä¿®æ”¹å˜é‡çš„å€¼ã€‚

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
    </style>
</head>
<body>

    <div id="app" v-clock>
        <h2>é—®å·è°ƒæŸ¥</h2>
        <p>
            å§“åï¼š<input type="text" v-model="name">
        </p>
        <p>
            æ€§åˆ«ï¼š
            <input type="radio" name="sex" value="ç”·" v-model="sex">ç”·
            <input type="radio" name="sex" value="å¥³" v-model="sex">å¥³
        </p>
        <p>
            çˆ±å¥½ï¼š
            <input type="checkbox" name="hobby" value="æ‰“ç¯®çƒ" v-model="hobby">æ‰“ç¯®çƒ
            <input type="checkbox" name="hobby" value="è·³èˆ" v-model="hobby">è·³èˆ
            <input type="checkbox" name="hobby" value="è¯»ä¹¦" v-model="hobby">è¯»ä¹¦
        </p>
        <p>
            ç±è´¯ï¼š
            <select name="native" id="" v-model="native">
                <option value="æ²³åŒ—">æ²³åŒ—</option>
                <option value="æ²³å—">æ²³å—</option>
                <option value="å±±ä¸œ">å±±ä¸œ</option>
                <option value="å±±è¥¿">å±±è¥¿</option>
                <option value="æ¹–å—">æ¹–å—</option>
                <option value="æ¹–åŒ—">æ¹–åŒ—</option>
            </select>
        </p>
        <p>
            æ‚¨å¡«å†™çš„è¡¨å•å†…å®¹ä¸ºï¼šå§“åï¼š{{name}}ï¼Œæ€§åˆ«ï¼š{{sex}}ï¼Œçˆ±å¥½ï¼š{{hobby}}ï¼Œç±è´¯ï¼š{{native}}        
        </p>
        <button @click="submit">æäº¤</button>
    </div>
    <script src = "../js/vue.dev.js"></script>
    <script>
        var vue = new Vue({
            el: "#app",
            data: {
                name: '',
                sex: 'ç”·',
                hobby: [],
                native: 'æ²³åŒ—'
            },
            methods:{
                submit() {
                    //æ±‡æ€»ä¿¡æ¯æäº¤åˆ°åç«¯
                    let obj = {
                        name: this.name,
                        sex: this.sex,
                        hobboy: this.hobby,
                        native: this.native
                    }
                    console.log(obj)
                }
            }
        })
    </script>
</body>
</html>
```

![image-20231222184152109](å­¦ä¹ ç¬”è®°-å‰ç«¯-Gem.assets/image-20231222184152109.png)

é¡µé¢æ‰“å¼€åä¼šå‘ç°ï¼Œå½“å§“åï¼Œæ€§åˆ«ï¼Œçˆ±å¥½è¿™äº›ç•Œé¢å…ƒç´ çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå˜é‡çš„å€¼ä¹Ÿè‡ªåŠ¨å˜äº†ã€‚





# Vue3

Vue3 åœ¨2022å¹´9æœˆä»½å‘å¸ƒäº†ç¨³å®šçš„æ­£å¼ç‰ˆæœ¬,å›´ç»•å®ƒçš„è®¾è®¡ä¸€ç›´éƒ½æ˜¯å¾ˆæœ‰çƒ­ç‚¹çš„è¯é¢˜ã€‚è¶æ­¤æœºä¼šæˆ‘ä»¬å°±ç³»ç»Ÿæ€§çš„æ¥å­¦ä¹ ä¸‹Vue3ï¼Œå…³äºå®ƒçš„ä¼˜åŠ£æˆ‘ä»¬å­¦å®Œä¹‹åè‡ªç„¶å°±çŸ¥é“æ€ä¹ˆå»è¡¡é‡äº†ã€‚



## æ–°ç‰¹æ€§

### Vue3ç¼ºç‚¹

1. vue3å°†ä¸å†æ”¯æŒIE11ï¼ŒVue åœ¨ 2.X ç‰ˆæœ¬ä»ç„¶æ”¯æŒ IE11ï¼Œå¦‚æœä½ æƒ³ä½¿ç”¨ç±»ä¼¼ Vue 3 çš„æ–°ç‰¹æ€§ï¼Œå¯ä»¥ç­‰ç­‰ Vue 2.7 ç‰ˆæœ¬ã€‚è¿™æ¬¡çš„ RFC å®£å¸ƒï¼Œå°†ä¼šå¯¹ 2.7 ç‰ˆæœ¬åšå‘åå…¼å®¹ï¼Œç§»æ¤ 3.x çš„éƒ¨åˆ†æ–°åŠŸèƒ½ï¼Œä»¥ä¿è¯ä¸¤ä¸ªç‰ˆæœ¬ä¹‹é—´ç›¸ä¼¼çš„å¼€å‘ä½“éªŒã€‚
2. å¯¹äºä¹ æƒ¯äº†Vue2.0å¼€å‘æ¨¡å¼çš„å¼€å‘è€…æ¥è¯´ï¼Œå¢åŠ äº†å¿ƒæ™ºè´Ÿæ‹…ï¼Œå¯¹å¼€å‘è€…ä»£ç ç»„ç»‡èƒ½åŠ›æœ‰ä½“éªŒ



## æ€§èƒ½æå‡

### æ›´å¿«

ä¸ Vue2 ç›¸æ¯” Vue3 è¿›ä¸€æ­¥å‹æ¦¨è¿è¡Œæ—¶æ€§èƒ½ã€‚

* Object.definePropery  vs Proxy
* Virtual DOM é‡æ„
* æ›´å¤šç¼–è¯‘æ—¶ä¼˜åŒ–

é¦–è¦çš„ç»†èŠ‚Vue3.0 æŠŠæ•°æ®å¯¹è±¡ä¾¦æµ‹çš„API ä»Object.definePropertyå»åŠ«æŒ getter and setter æ¢æˆ proxyï¼Œé‚£ä»è¿™é‡Œå°±èƒ½è§‚æµ‹åˆ°åˆå§‹æ€§èƒ½æœ‰å®é™…æ€§çš„æå‡ã€‚

å› ä¸º Object.defineProperty åœ¨è½¬åŒ–æ•°æ®å¯¹è±¡å±æ€§ä¸ºgetterã€setteå…¶å®æ˜¯ä¸€ä¸ªç›¸å½“æ˜‚è´µçš„æ“ä½œï¼Œå› ä¸ºJavaScriptå¼•æ“å®ƒå–œæ¬¢ä½ å¯¹è±¡çš„ç»“æ„è¶Šç¨³å®šè¶Šå¥½ï¼Œä½ æŠŠå¯¹è±¡çš„ç»“æ„ä¸åœçš„åœ¨æ”¹å˜çš„è¯å¯¹å®ƒè€Œè¨€å¯ä¼˜åŒ–æ€§å°±å˜ä½äº†ã€‚proxyçš„ä¼˜ç‚¹æ˜¯å¯¹ä½ çš„åŸå§‹å¯¹è±¡åšäº†ä¸€ä¸ªçœŸæ­£çš„proxy   æ˜¯çœŸæ­£çš„åœ¨å¯¹è±¡å±‚é¢åšäº†proxyä¸ä¼šå»æ”¹å˜å¯¹è±¡çš„ç»“æ„ã€‚

**Virtual DOM é‡æ„**

æ•´ä¸ªVirtual DOM ç”¨typescripté‡å†™äº†ï¼Œåˆå§‹æ€§èƒ½å’Œç»„ä»¶çš„å¯åŠ¨æ€§èƒ½æ¯”ä¹‹å‰å¿«äº†å°†è¿‘ä¸€å€ã€‚

**æ›´å¤šç¼–è¯‘æ—¶ä¼˜åŒ–**

Slot é»˜è®¤ç¼–è¯‘ä¸ºå‡½æ•° è¿™æ ·å°±ä½¿å¾—çˆ¶å­ç»„ä»¶ä¸å­˜åœ¨æ›´æ–°çš„å¼ºè€¦åˆï¼Œç„¶åç”ŸæˆVnode çš„å‡½æ•°å°½é‡è®©ä»–å‚æ•°ä¸€è‡´åŒ–ã€‚

åœ¨ç¼–è¯‘æ—¶ç»™æ¯ä¸€ä¸ªVNode å¸¦ç€å…³äºä»–ç±»å‹è·Ÿchildrenç±»å‹çš„ä¿¡æ¯ã€‚è¿™äº›éƒ½å¯ä»¥å¸®åŠ© run time å˜å¾—æ›´å¿«ã€‚

ä½†è¿™äº›ä¼˜åŒ–è¿˜ä¸å¤Ÿï¼è¿˜å¯ä»¥åšå¾—æ›´å¥½ï¼ŒVirtual DOMè¿™ä¸ªä¸œè¥¿æ²¡å­¦è¿‡çš„åŒå­¦å¯èƒ½æœ‰è¯¯è§£ä»¥ä¸ºå®ƒæ˜¯ä¸ºäº†æ“ä½œæ›´å¿«è€Œäº§ç”Ÿçš„ï¼Œå…¶å®ä¸æ˜¯ï¼ŒVirtual DOMæ˜¯ä¸€ä¸ªæŠ½è±¡å±‚ã€‚ä»–çš„ä½œç”¨æ˜¯èƒ½è®©ä½ ç”¨çº¯JavaScriptå»æè¿°ä½ çš„ç•Œé¢ ä½ çš„UIæ˜¯ä»€ä¹ˆæ ·å­ã€‚ ä»–çš„æ ¸å¿ƒä»·å€¼åœ¨äºç»™ä½ æ›´åŠ å¼ºå¤§çµæ´»æ€§ ä»¥åŠè¡¨è¾¾åŠ›ã€‚

#### ä¼ ç»Ÿvdomçš„æ€§èƒ½ç“¶é¢ˆ

åè¿‡æ¥å®ƒä»˜å‡ºçš„ä»£ä»·æ˜¯ï¼Œæ¯æ¬¡æ•°æ®æ›´æ–° Virtual DOM ç†è®ºä¸Šæ˜¯è¦é‡æ–°åˆ›å»º  Virtual DOM æ ‘çŠ¶çš„æ•°æ®ç»“æ„ï¼Œç„¶åç®—æ³•éœ€è¦ä»å¤´åˆ°å°¾æŠŠæ—§çš„ tree  å’Œæ–°çš„ tree è¿›è¡Œä¸€æ¬¡å½»åº•çš„éå†æ¯”å¯¹ã€‚

è™½ç„¶Vue é€šè¿‡æ•°æ®ä¾¦æµ‹èƒ½åœ¨ç»„ä»¶å±‚é¢æœ€å°åŒ–ä½ è¦æ›´æ–°çš„ç‚¹ï¼Œä½†æ˜¯ç»„ä»¶è¿™ä¸ªç²’åº¦è¿˜æ˜¯ç›¸å¯¹æ¯”è¾ƒç²—çš„ ï¼Œè™½ç„¶Vueèƒ½å¤Ÿä¿è¯è§¦å‘æ›´æ–°ç»„ä»¶æœ€å°åŒ–ï¼Œä½†åœ¨å•ä¸ªç»„ä»¶å†…éƒ¨ä»éœ€è¦éå†æ”¹ç»„ä»¶çš„æ•´ä¸ªvdom treeæ ‘ã€‚

#### ä¼ ç»Ÿvdomçš„æ€§èƒ½ç“¶é¢ˆï¼šäºŒ

ä¸¾ä¸ªä¾‹å­:

æ¯”å¦‚è¯´æœ‰è¿™æ ·ä¸€ä¸ªæ¨¡æ¿ï¼Œå·¦è¾¹æ˜¯ä¸€ä¸ªæ¨¡æ¿ï¼Œå³è¾¹æ˜¯åœ¨æ¯æ¬¡æ•°æ®æ›´æ–°çš„æ—¶å€™æˆ‘ä»¬çš„ç®—æ³•è¦å®é™…è¿›è¡Œçš„æ“ä½œã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­å°±æ˜¯ä»ä¸Šåˆ°ä¸‹ å…ˆè¦å»diff  div çœ‹ä¸‹ä»–çš„æ–°çš„VNode è·Ÿæ—§çš„ Vnode æ˜¯ä¸æ˜¯åŒä¸€ä¸ªdivï¼Œå¦‚æœæ˜¯åŒä¸€ä¸ªæˆ‘ä»¬è¦å»çœ‹å®ƒçš„id æœ‰æ²¡æœ‰å˜ã€‚ ç„¶ååœ¨å»çœ‹å®ƒçš„children å®ƒçš„è¿™äº›å­èŠ‚ç‚¹æœ‰æ²¡æœ‰å˜ï¼Œè¿™äº›å­èŠ‚ç‚¹é¡ºåºæœ‰æ²¡æœ‰å‘ç”Ÿæ”¹å˜ã€‚ é¡ºåºæ”¹å˜ä¹‹åè¿˜è¦å»çœ‹è¿™ä¸ªå…ƒç´ çš„èŠ‚ç‚¹å‘ç”Ÿæ”¹å˜æ²¡æœ‰ï¼Œè¿™ä¸ªèŠ‚ç‚¹çš„class å‘ç”Ÿæ”¹å˜æ²¡æœ‰ text å‘ç”Ÿæ”¹å˜æ²¡æœ‰ã€‚

å®é™…ä¸Šä½ å¯ä»¥çœ‹åˆ°åœ¨æˆ‘ä»¬æ¨¡æ¿ä¸­åªæœ‰messageæ˜¯åŠ¨æ€ä¼šæ”¹å˜çš„ã€‚ä½†æ¯æ¬¡éƒ½éœ€è¦å»éå†æ•´ä¸ªvdom tree æ¥è¿›è¡Œæ¯”å¯¹ã€‚

è¿™ä¸ªç®—æ³• react æ¨å‡ºæ¥çš„æ—¶å€™å¤§å®¶éƒ½åœ¨è´¨ç–‘ï¼Œè¿™æ ·æ›´æ–°æ¸²æŸ“ä¼šä¸ä¼šå¾ˆæ…¢ã€‚ ä½†ç°åœ¨çš„JavaScriptå¼•æ“å¤Ÿå¿«ï¼Œå½“ç„¶è¿™ä¸ªå¤Ÿå¿«æ˜¯ç›¸å¯¹è€Œè¨€ï¼Œå°±æ˜¯è¯´åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä½ å¯èƒ½åœ¨16æ¯«ç§’å†…å®Œæˆä½ çš„æ›´æ–°ã€‚ä½†æ˜¯åœ¨ä½ çš„åº”ç”¨è¶³å¤Ÿå¤§çš„æƒ…å†µä¸‹ 16ms ä¸æ˜¯æ€»æ˜¯å¤Ÿçš„ã€‚

#### ä¼ ç»Ÿvdomçš„æ€§èƒ½ç“¶é¢ˆï¼šä¸‰

é‚£ä¹ˆä¼ ç»Ÿçš„ vdom ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è¿™ç§ä¸æ•ˆç‡çš„ç®—æ³•å‘¢ï¼Ÿ

ç©¶å…¶åŸå› æ˜¯å› ä¸ºæœ€åˆçš„ vdom ä¸æ˜¯ä»æ¨¡æ¿ç¼–è¯‘è€Œæ¥ï¼Œæ¯”å¦‚ react å®ƒçš„ vdom æ˜¯ä»jsxç¼–è¯‘è¿‡æ¥ã€‚jsx åªæ˜¯JavaScriptçš„ä¸€ä¸ªè¯­æ³•å»¶ä¼¸ï¼Œå®ƒå…·å¤‡JavaScriptçš„ä¸€åˆ‡åŠ¨æ€æ€§ã€‚

æ¯”å¦‚ä¸Šé¢çš„ render function å¦‚æœä½ æƒ³å…‰åˆ†æè¿™æ®µJavaScriptï¼Œå…¶å®å”¯ä¸€å¯ä»¥å˜çš„å°±æ˜¯åœ¨ i == 2 çš„æ—¶å€™ message çš„å€¼ä¼šå‘ç”Ÿæ”¹å˜ã€‚ä½ æ˜¯å¾ˆéš¾å¾ˆéš¾åšåˆ°è¿™ä¸€ç‚¹çš„ï¼Œæ²¡æœ‰ä¸€ä¸ªå¾ˆç¨³å¦¥çš„åŠæ³•å¯ä»¥åˆ†æå‡ºè¿™ä¸ªä¿¡æ¯ã€‚

é‚£ä¹ˆreact å¯¹äºè¿™ä¸ªé—®é¢˜çš„ä¼˜åŒ–è§£å†³æ–¹æ¡ˆæ˜¯ä»€ä¹ˆï¼Ÿ

å°±æ˜¯æ—¶é—´åˆ†ç‰‡ï¼Œå°±æ˜¯è¯´æˆ‘æ‰¿è®¤äº†æˆ‘çš„è¿™ä¸ªæ¡†æ¶åœ¨ä½¿ç”¨çš„æ—¶å€™ä¼šæ¶ˆè€—å¤§é‡çš„JavaScriptçš„CPUæ—¶é—´ï¼Œå®ƒçš„ç­–ç•¥æ˜¯æˆ‘ä¼šæŠŠè¿™äº›CPUçš„æ—¶é—´åˆ‡åˆ†åˆ°ä¸€å¸§ä¸€å¸§ã€‚ä»è€Œä¸ä¼šå»å½±å“æˆ‘ç”¨æˆ·çš„æ“ä½œ

#### Vue3ä¸ºä»€ä¹ˆä¸æŠ›å¼ƒVirtual DOM?

Virtual DOMæœ‰è¿™ä¹ˆå¤šçš„é—®é¢˜é‚£åœ¨Vue3é‡Œé¢ä¼šä¸ä¼šæŠ›å¼ƒå‘¢ï¼Ÿ

ç­”æ¡ˆæ˜¯ä¸ä¼šå› ä¸ºå‡ ä¸ªåŸå› ï¼š

* é«˜çº§åœºæ™¯ä¸‹æ‰‹å†™ render functionè·å¾—æ›´å¼ºçš„è¡¨è¾¾åŠ›
* ç”Ÿæˆä»£ç æ›´ç®€æ´
* å…¼å®¹Vue2.x ï¼ˆç°æœ‰çš„ç”Ÿæ€éƒ½ä¾èµ–äºVirtual DOMï¼‰

#### Vue3 ä¼šåšä»€ä¹ˆæ”¹è¿›ï¼Ÿ

ä½ è¦çŸ¥é“Vueç‰¹æœ‰çš„ä¸œè¥¿åº•å±‚æ˜¯Virtual DOMï¼Œä¸Šå±‚æ˜¯åŒ…å«å¤§é‡æœ‰ä»·å€¼çš„é™æ€ä¿¡æ¯æ¨¡æ¿ã€‚ è¿™ç‚¹è·Ÿreact å®Œå…¨ä¸ä¸€æ ·ã€‚ åŒæ ·ä¸€ä¸ªç»„ä»¶ä½ ä¸€çœ¼å°±èƒ½çœ‹å‡ºé™¤äº†è¿™ä¸ªmessage å…¶ä»–æ‰€æœ‰çš„èŠ‚ç‚¹éƒ½æ˜¯ä¸ä¼šå˜çš„ã€‚ è¿™å°±æ˜¯ä¸€ä¸ªåŒ…å«å¯ä»¥æ¨æµ‹çš„ä¼˜åŒ–ä¿¡æ¯é‡çš„ä¸åŒã€‚

æ‰€ä»¥Vue3 çš„ç›®çš„æ˜¯è¦æ‰¾åˆ°ä¸€ä¸ªè¿è¡Œæ—¶çš„ç®—æ³• æ—¢å¯ä»¥å…¼å®¹render functionï¼Œåˆå¯ä»¥æœ€å¤§åŒ–åˆ©ç”¨é™æ€æ¨¡æ¿ä¿¡æ¯ã€‚

Vue2.xé€‰æ‹©çš„æ–¹å¼æ˜¯é¦–å…ˆå…¼å®¹ render function çš„å†™æ³•ï¼Œç„¶åå† VDOM tree è®¾ç½®è§„åˆ™æŠŠæ°¸è¿œä¸ä¼šå˜åŒ–çš„node æ ‡æ³¨ä¸ºé™æ€èŠ‚ç‚¹ Vnode å­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚ ä¸¤ä¸ªæ–°æ—§ tree åœ¨æ¯”å¯¹çš„æ—¶å€™é™æ€èŠ‚ç‚¹å°±ä¼šç›´æ¥å¤ç”¨å†…å­˜ä¸­çš„Vnodeã€‚

åœ¨Vue3é‡Œé¢æ‰¾åˆ°äº†ä¸€ç§æ¯”Vue2æ›´åŠ å‹æ¦¨æ€§èƒ½çš„æ€è·¯ã€‚

#### æœ€ç®€å•çš„æƒ…å†µ

æˆ‘ä»¬å…ˆæŠŠæ•´ä¸ªæ¨¡æ¿çœ‹æˆé™æ€ Vnode çš„ã€‚ ç„¶åå»åˆ†æä»–é‡Œé¢é‚£äº›ä¸œè¥¿ä¼šåŠ¨ï¼Œæœ€ç®€å•çš„æƒ…å†µåœ¨åšä¸ªæ¨¡æ¿ä¸­ä¸€çœ¼å°±èƒ½çœ‹å‡ºæ¥ï¼Œåªæœ‰è¿™ä¸€ä¸ªæ’å€¼ message ä¼šå˜ï¼Œé™¤äº†è¿™æ’å€¼ä¹‹å¤–å…¶ä»–çš„èŠ‚ç‚¹ç»“æ„æ˜¯å®Œå…¨ä¸ä¼šæ”¹å˜çš„ã€‚ è€Œåœ¨Virtual DOMä¸­æœ€è€—æ—¶çš„æ“ä½œå°±æ˜¯ä¸¤ä¸ªchildren æ•°ç»„çš„æ¯”å¯¹ã€‚ è¿™ä¸ªæ“ä½œåœ¨è¿™ç§æƒ…å†µä¸‹å®Œå…¨æ²¡æœ‰å¿…è¦ã€‚ æ‰€ä»¥ç†æƒ³çš„ç®—æ˜¯åªè¦check ä¸‹è¿™ä¸ªmessage å€¼æ”¹å˜æ²¡æœ‰ã€‚

è€Œåœ¨Vue ä¸­èƒ½æ”¹å˜æ¨¡æ¿èŠ‚ç‚¹ç»“æ„çš„è¿˜æœ‰ä¸¤ä¸ªç»“æ„æ€§æŒ‡ä»¤ v-if  v-forã€‚

#### ç»“æ„æ€§æŒ‡ä»¤ v-if

å¦‚æœä½ åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨v-if é‚£å°±è¯´æ˜æ¨¡æ¿å¯èƒ½ä¼šæœ‰èŠ‚ç‚¹ç»“æ„å˜åŒ–ï¼Œ èŠ‚ç‚¹ç»“æ„å˜åŒ–æ˜¯vdomçš„ç®—æ³•æ ¸å¿ƒã€‚

ä½†æ˜¯æˆ‘ä»¬æŠŠå®ƒåˆ‡åˆ†ä¸‹ï¼Œç†æƒ³çš„æƒ…å†µä¸‹æˆ‘ä»¬åªè¦check ä¸‹è¿™ä¸ªv-ifçš„å€¼å˜äº†æ²¡æœ‰ï¼Œç„¶ååœ¨check ä¸‹é‡Œé¢çš„è¿™messageçš„å€¼å˜äº†æ²¡æœ‰ã€‚æˆ‘ä»¬æŠŠå®ƒåˆ‡åˆ†æˆå†…å¤–ä¸¤ä¸ªéƒ¨åˆ†ã€‚

#### ç»“æ„æ€§æŒ‡ä»¤ v-if: äºŒ

ç°åœ¨è¿™ç§åšæ³•çš„é¢—ç²’åº¦å¢å¼º ä¸å†æ˜¯ä»¥èŠ‚ç‚¹ä½œä¸ºæœ€å°å•å…ƒã€‚  è€Œæ˜¯å¤–å±‚éƒ¨åˆ†æŠŠå†…å±‚éƒ¨åˆ†å½“æˆä¸€ä¸ªå­èŠ‚ç‚¹ã€‚å¤–å±‚æ˜¯ä¸€ä¸ªblock  å†…å±‚ä¹Ÿæ˜¯ä¸€ä¸ªblock è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å‘ç°å¤–éƒ¨çš„èŠ‚ç‚¹ç»“æ„æ˜¯ä¸ä¼šå‘ç”Ÿæ”¹å˜çš„ï¼Œå†…éƒ¨çš„èŠ‚ç‚¹ç»“æ„ä¹Ÿæ˜¯ä¸ä¼šå‘ç”Ÿæ”¹å˜çš„ã€‚

æ¢è¨€ä¹‹æˆ‘ä»¬æŠŠæ•´ä¸ªæ¨¡æ¿åˆ‡åˆ†æˆäº†ä¸¤å—ï¼Œè¿™ä¸¤å—å„è‡ªçš„èŠ‚ç‚¹ç»“æ„æ˜¯å®Œå…¨ä¸ä¼šå˜çš„ï¼Œé‚£ä¹ˆv-for ä¹Ÿæ˜¯åŒæ ·çš„é“ç†ã€‚

#### ç»“æ„æ€§æŒ‡ä»¤ v-for

æˆ‘ä»¬æŠŠå®ƒåˆ‡åˆ†ä¸‹å˜æˆä¸¤å—ï¼Œå¤–å±‚æ˜¯ä¸€ä¸ªèŠ‚ç‚¹ç»“æ„ä¸ä¼šå˜åŒ–çš„blockï¼Œå†…å±‚çš„block æˆ‘ä»¬æŠŠå®ƒå½“æˆfragmentã€‚ è€Œåœ¨æ¯ä¸€ä¸ªfragment å†…éƒ¨ä»–çš„èŠ‚ç‚¹ç»“æ„åˆæ˜¯å›ºå®šçš„ã€‚ æ‰€ä»¥æˆ‘ä»¬å°±å‘ç°äº†å…¶å®åŠ¨æ€çš„èŠ‚ç‚¹ç»“æ„å‘ç”Ÿå˜åŒ–åªå¯èƒ½æ˜¯åœ¨ä½¿ç”¨äº†v-ifã€ v-for è¿™æ ·çš„æ‰€è°“çš„ç»“æ„æ€§æŒ‡ä»¤çš„æƒ…å†µä¸‹æ‰ä¼šå‡ºç°ã€‚

æ‰€ä»¥æˆ‘ä»¬ä¸€ç»“æ„æ€§æŒ‡ä»¤ä¸ºè¾¹ç•Œã€‚æŠŠæ¨¡å—åˆ‡åˆ†æˆä¸€ä¸ªä¸€ä¸ªçš„é™æ€çš„å—ï¼Œè‹±æ–‡åå­—å«block tree ã€‚

#### block tree

å¤§ä½“çš„æ„æ€å°±æ˜¯è¯´ï¼Œä¸€ä¸ªåŠ¨æ€çš„æ¨¡æ¿æˆ‘ä»¬ä¼šæŠŠå®ƒåˆ‡åˆ†æˆç›¸å¯¹å†…éƒ¨æ˜¯é™æ€çš„å—ï¼Œé‚£è¿™æ ·çš„è¯æ¯ä¸€ä¸ªé™æ€çš„å—å†…éƒ¨åªéœ€è¦ä»¥ä¸€ä¸ªArrayçš„æ•°ç»„å»è¿½è¸ªå®ƒå†…éƒ¨çš„åŠ¨æ€å†…å®¹ã€‚è¿™æ ·å°±èƒ½æå¤§ç¨‹åº¦ä¸Šçš„å‡å°‘æ— è°“çš„éå†æ¯”å¯¹æ“ä½œã€‚

æˆ‘ä»¬æŠŠVue2 vs Vue3 å‰åæ¨¡æ¿æ¨¡å¼å¯¹æ¯”æ¥çœ‹ä¸‹ã€‚

#### Before

åœ¨ä¹‹å‰å½“message çš„å€¼å‘ç”Ÿæ”¹å˜ï¼Œæˆ‘ä»¬éœ€è¦æ‹¿åˆ°æ–°æ—§çš„vom è¿›è¡Œéå¸¸è€—æ—¶çš„éå†æ¯”å¯¹æ“ä½œã€‚

#### After

ä¼˜åŒ–ä¹‹åç”¨block çš„æ–¹å¼ï¼Œ åˆ†æä¹‹åè¿™ä¸ªæ¨¡æ¿å°±åªæœ‰ä¸€ä¸ªå•ç‹¬çš„block ï¼Œè¿™ä¸ªblockå†…éƒ¨å”¯ä¸€çš„åŠ¨æ€èŠ‚ç‚¹å°±æ˜¯messageï¼Œæ‰€ä»¥æˆ‘ä»¬çš„æ›´æ–°æ“ä½œå®é™…ä¸Šåªè¦å»check message çš„å€¼æ”¹å˜æ²¡æœ‰ã€‚

è¿™æ ·çš„ç­–ç•¥å°±æŠŠæˆ‘ä»¬æ›´æ–°çš„æ€§èƒ½ç”±æ¨¡æ¿çš„æ•´ä½“å¤§å°ç›¸å…³ï¼Œå½»åº•è½¬å˜æˆäº†ä½ æœ‰å¤šå°‘åŠ¨æ€å†…å®¹ç›¸å…³ã€‚ ä¹‹å‰åœ¨åŒæ ·ä¸€ä¸ªå¤æ‚ä¸šåŠ¡åœºæ™¯ä¸‹åšä¸ªç­–ç•¥ï¼ŒVue3çš„æ›´æ–°æ€§èƒ½æ¯”Vue2 å¿«äº†å°†è¿‘6å€ã€‚

å¥½äº†æ€§èƒ½ä¼˜åŒ–æˆ‘ä»¬å°±è®²åˆ°è¿™æ¥ä¸‹æ¥æˆ‘ä»¬å»çœ‹çœ‹Vue3.0 Compiler ä¼˜åŒ–ç»†èŠ‚ã€‚

> Vue3æ¨¡æ¿ç¼–è¯‘ä¹‹åçš„Render Function
>
> ç½‘é¡µåœ°å€ï¼š[https://vue-next-template-explorer.netlify.app/](https://vue-next-template-explorer.netlify.app/)

ç¤ºä¾‹ï¼š

```html
<div>
   <span>static</span>
   <span>{{message}}</span>
</div>
```

ä¸¤ä¸ªèŠ‚ç‚¹ä¸€ä¸ªspanä¸­æ–‡æœ¬å†…å®¹æ˜¯é™æ€çš„ï¼Œä¸€ä¸ªspanä¸­çš„å†…å®¹æ˜¯åŠ¨æ€ç»‘å®šçš„ã€‚

**ç”Ÿæˆçš„æ¸²æŸ“å‡½æ•°:**

```js
import { createVNode as _createVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createBlock as _createBlock } from "vue"

export function render(_ctx, _cache) {
  return (_openBlock(), _createBlock("div", null, [
    _createVNode("span", null, "static"),
    _createVNode("span", null, _toDisplayString(_ctx.message), 1 /* TEXT */)
  ]))
}
```

è¿™æ˜¯ä¸€ä¸ªé»˜è®¤ç”Ÿæˆçš„æ¸²æŸ“å‡½æ•°ï¼Œå¯ä»¥çœ‹åˆ°è¿™ä¸ªæ ¹èŠ‚ç‚¹ div å®ƒæ˜¯è¢«åšæˆäº†ä¸€ä¸ªblockã€‚

```js
 _createVNode("span", null, "static")
```

ç„¶åè¿™ä¸ªæ˜¯ä¸€ä¸ªæ™®é€šçš„å®Œå…¨é™æ€çš„spanã€‚

```js
 _createVNode("span", null, _toDisplayString(_ctx.message), 1 /* TEXT */)
```

è¿™è¾¹æ˜¯ä¸€ä¸ªå¸¦æœ‰åŠ¨æ€ç»‘å®šçš„spanï¼Œå®ƒçš„å†…å®¹æ˜¯åŠ¨æ€ç»‘å®šåˆ°ç»„ä»¶çš„messageè¿™ä¸ªå±æ€§ä¸Šé¢ã€‚ è¿™é‡Œæœ‰ä¸ªæ•°å­—ï¼Œè¿™ä¸ªå« PatchFlags  **ï¼Œ** è¿™ä¸ªflagå°±æ˜¯ç¼–è¯‘æ—¶ç”Ÿæˆçš„ä¸€ä¸ªæ ‡è®°ã€‚

æˆ‘ä»¬çš„é¡¹ç›®åœ¨è¿è¡Œæ—¶è¿è¡Œçš„æ—¶å€™é¦–å…ˆä¼šçŸ¥é“è¿™ä¸ªdiv æ˜¯ä¸€ä¸ª blockï¼Œè¿™ä¸ªblock ä¸­åªæœ‰å¸¦ patchFlag çš„node æ‰ä¼šè¢«çœŸæ­£çš„è¿½è¸ªã€‚

ä¹Ÿå°±æ˜¯è¯´å½“æˆ‘ä»¬åç»­è¦æ›´æ–°çš„æ—¶å€™ï¼ŒVueå°±æ˜¯çŸ¥é“äº†ï¼Œè¿™ä¸ªdiv é™æ€çš„ span ä¸ç”¨ç®¡ã€‚  ç›´æ¥è·³åˆ°åŠ¨æ€æœ‰flag æ ‡è®°çš„node èŠ‚ç‚¹ä¸Šå»ï¼Œé€šè¿‡flagçš„ä¿¡æ¯æˆ‘ä»¬çŸ¥é“åœ¨æ•´ä¸ªèŠ‚ç‚¹ä¸Šé¢æˆ‘ä»¬å”¯ä¸€è¦åšçš„å°±æ˜¯æ¯”è¾ƒ text é‡Œé¢æ–‡å­—å†…å®¹çš„å˜åŠ¨ã€‚ æˆ‘ä»¬ä¸ç”¨ç®¡ä»–ä»¬å¯èƒ½å­˜åœ¨çš„ä»»ä½•å±æ€§æˆ–è€…å…¶ä»–ç»‘å®šçš„å˜åŒ–ã€‚

ä¸¾ä¸€äº›æ›´å…·ä½“çš„ä¾‹å­ï¼šå¦‚æœæˆ‘ä»¬åŠ ä¸Šå¤§é‡çš„é™æ€çš„å†…å®¹

```html
<div>
  <span>static</span>
  <span>static</span>
  <span>static</span>
  <span>static</span>
  <span>{{message}}</span>
  <span>static</span>
  <span>static</span>
  <span>static</span>
</div>
```

ç”Ÿæˆçš„æ¸²æŸ“å‡½æ•°ï¼š

```js
import { createVNode as _createVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createBlock as _createBlock } from "vue"

export function render(_ctx, _cache) {
  return (_openBlock(), _createBlock("div", null, [
    _createVNode("span", null, "static"),
    _createVNode("span", null, "static"),
    _createVNode("span", null, "static"),
    _createVNode("span", null, "static"),
    _createVNode("span", null, _toDisplayString(_ctx.message), 1 /* TEXT */),
    _createVNode("span", null, "static"),
    _createVNode("span", null, "static"),
    _createVNode("span", null, "static")
  ]))
}
```

é‚£åœ¨ä¸€ä¸ªä¹‹å‰çš„Virtual DOMçš„ç®—æ³•ä¸‹ï¼Œéœ€è¦æŠŠæ‰€æœ‰çš„ span å…¨éƒ¨éƒ½è¿‡ä¸€éï¼Œè€Œä¸”æ‰€æœ‰çš„ span éƒ½éœ€è¦å»çœ‹å®ƒæ—§çš„props å’Œæ–°çš„ props æœ‰æ²¡æœ‰å˜ã€‚ è™½ç„¶ JavaScript åšè¿™äº›äº‹æƒ…å¾ˆå¿«ï¼Œä½†æ˜¯å½“ä½ çš„åº”ç”¨è¶Šæ¥è¶Šå¤§çš„æ—¶å€™ï¼Œä¸å¯é¿å…çš„ä¼šå ç”¨ä½ æ›´å¤šçš„æ›´æ–°æ—¶é—´ã€‚

åœ¨æ–°ç‰ˆæœ¬çš„ä¼˜åŒ–ä¸‹ï¼Œçœ‹åˆ°è¿™è¾¹æ˜¯ä¸€ä¸ªblock å°±ç›´æ¥çœ‹å®ƒé‡Œé¢æœ‰æ²¡æœ‰ä»»ä½•å¸¦è¿™äº›åŠ¨æ€çš„ä¸œè¥¿ã€‚ç„¶åå°±åªè¦æŠŠè¿™äº›åŠ¨æ€çš„èŠ‚ç‚¹è¿‡ä¸€éå°±è¡Œã€‚é‚£è¿™æ ·å°±èŠ‚çœäº†å¾ˆå¤šæ›´æ–°æ—¶æ‰€æ¶ˆè€—çš„æ€§èƒ½æ—¶é—´ã€‚

ç”šè‡³æ˜¯åœ¨ä¸€ä¸ªblocké‡Œé¢ä¸ç®¡ä½ åµŒå¥—çš„å¤šæ·±æˆ‘ä»¬æ˜¯ä¸éœ€è¦éå†è¿™ä¸ª div åªéœ€è¦å»å¯»æ‰¾åˆ°è¿™ä¸ªåŠ¨æ€çš„èŠ‚ç‚¹ span çš„ã€‚

```html
<div>
  <span>static</span>
  <span>static</span>
  <span>static</span>
  <span>static</span>
  <div>
    <span>{{message}}</span>
  </div>
  <span>static</span>
  <span>static</span>
  <span>static</span>
</div>
```

å› ä¸ºæ‰€æœ‰ block ä¸­çš„åŠ¨æ€èŠ‚ç‚¹éƒ½æ˜¯è·Ÿæ ¹èŠ‚ç‚¹çš„ block ç»‘å®šèµ·æ¥çš„ã€‚ åœ¨æ•°æ®æ›´æ–°çš„æ—¶å€™æˆ‘ä»¬åªè¦èµ°åˆ°æ ¹èŠ‚ç‚¹ div çš„ block å°±å¯ä»¥è·³è½¬åˆ°åŠ¨æ€çš„èŠ‚ç‚¹ä¸Šã€‚ æ ¹æœ¬ä¸éœ€è¦æŠŠå…¶ä»–ä¸ä¼šå˜çš„èŠ‚ç‚¹åœ¨éå†ä¸€éã€‚

è¿™æ · Virtual DOM ä¸­æœ€æœ€è€—æ—¶çš„æœ€æœ€æµªè´¹æ€§èƒ½çš„ä¸€éƒ¨åˆ†å°±è¢«æˆ‘ä»¬è§£å†³æ‰äº†ã€‚

é‚£å¦å¤–ä¸€ä¸ªä¼˜åŒ–å°±æ¯”å¦‚è¯´æˆ‘ä»¬è¿™è¾¹æœ‰ä¸ªé™æ€çš„ id ç»‘å®šï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¸ª id æ˜¯å®Œå…¨é™æ€ä¸ä¼šå˜çš„ï¼Œæ‰€ä»¥patchFlagä¹Ÿæ²¡æœ‰å˜åŒ–ï¼Œä¹Ÿå°±æ˜¯è¯´å¯¹äºrun time æ¥è¯´è¿™ä¸ª id åœ¨ä¸ä¸åœ¨éƒ½æ²¡åŒºåˆ«ï¼Œæˆ‘ä»¬åªæœ‰ä¼šåœ¨åˆ›å»ºçš„æ—¶å€™åˆ›å»ºä¸€æ¬¡åé¢çš„æ›´æ–°å°±ä¸ç”¨å»ç®¡å®ƒäº†ã€‚

```html
<span id="foo">{{message}}</span>
```

é‚£å¦‚æœæˆ‘ä»¬æŠŠå®ƒåšæˆä¸€ä¸ªåŠ¨æ€çš„ç»‘å®šã€‚

```html
<div>
  <span>static</span>
  <span>static</span>
  <span>static</span>
  <span>static</span>
  <span :id="foo" class = "count">{{message}}</span>
  <span>static</span>
  <span>static</span>
  <span>static</span>
</div>
```

ç”Ÿæˆçš„æ¸²æŸ“å‡½æ•°

```js
import { createVNode as _createVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createBlock as _createBlock } from "vue"

export function render(_ctx, _cache) {
  return (_openBlock(), _createBlock("div", null, [
    _createVNode("span", null, "static"),
    _createVNode("span", null, "static"),
    _createVNode("span", null, "static"),
    _createVNode("span", null, "static"),
    _createVNode("span", {
      id: _ctx.foo,
      class: "count"
    }, _toDisplayString(_ctx.message), 9 /* TEXT, PROPS */, ["id"]),
    _createVNode("span", null, "static"),
    _createVNode("span", null, "static"),
    _createVNode("span", null, "static")
  ]))
}
```

åšæˆåŠ¨æ€ç»‘å®šä¹‹åå°±å¯ä»¥çœ‹åˆ°è¿™è¾¹çš„ patchFlag å˜äº†ï¼Œè¿™ä¸ª patchFlag å°±å·²ç»å‘Šè¯‰æˆ‘ä»¬è¯´ï¼Œè¿™ä¸ªèŠ‚ç‚¹ä¸å…‰æœ‰æ–‡å­—çš„å˜åŒ–ï¼Œè¿˜æœ‰ props çš„å˜åŒ–ã€‚é‚£å“ªä¸ª props ä¼šå˜å‘¢ï¼Ÿ id ã€‚

é‚£è¿™æ„å‘³è¿™æˆ‘ä»¬åœ¨åŠ å¦å¤–ä¸€ä¸ªé™æ€çš„classç»‘å®šï¼Œè¿™ä¸ªclass ç»‘å®šæ˜¯æ²¡æœ‰åŒ…å«åœ¨åŠ¨æ€ props çš„æ¸…å•é‡Œé¢çš„ã€‚æ¢è¨€ä¹‹ å½“æˆ‘ä»¬åœ¨ diff çš„æ—¶å€™ä¼šçœ‹è¿™ä¸ª id å˜äº†æ²¡æœ‰ï¼Œ æ ¹æœ¬ä¸ç”¨ç®¡è¿™ä¸ª classã€‚

æ‰€ä»¥è¿™å°±ä¿è¯äº†æˆ‘ä»¬åœ¨é€šè¿‡ç¼–è¯‘æ—¶çš„åˆ†æï¼Œæˆ‘ä»¬åœ¨åŠ¨æ€æ›´æ–°çš„æ—¶å€™æ°¸è¿œåªä¼šå…³æ³¨é‚£äº›çœŸæ­£ä¼šå˜çš„ä¸œè¥¿ã€‚è¿™æ ·å°±æ—¢è·³å‡ºäº† Virtual DOM æ›´æ–°æ—¶çš„æ€§èƒ½ç“¶é¢ˆï¼Œ åˆä¾ç„¶ä¿ç•™äº†å¯ä»¥æ‰‹å†™render functionçš„çµæ´»æ€§ã€‚

è¿™æ ·å°±ç­‰äºè¯´æˆ‘ä»¬æ—¢æ‹¥æœ‰reactçš„çµæ´»æ€§ï¼Œåˆä¿ç•™äº†åŸºäºæ¨¡æ¿çš„æ€§èƒ½ä¿è¯ã€‚

å¤§å®¶è‚¯å®šå¾ˆå¥½å¥‡æˆ‘ä»¬è®²äº†è¿™ä¹ˆå¤š block çš„å¥½å¤„ï¼Œé‚£ä»–å…·ä½“æ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿ æ€ä¹ˆèƒ½å¿«é€Ÿæ‰¾åˆ°è¦æ›´æ–°çš„åŠ¨æ€æ¸…å•ï¼Ÿ

**æŸ¥çœ‹ hoisteStatic æ¨¡å¼**

```js
import { createVNode as _createVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createBlock as _createBlock } from "vue"

const _hoisted_1 = /*#__PURE__*/_createVNode("span", null, "static", -1 /* HOISTED */)
const _hoisted_2 = /*#__PURE__*/_createVNode("span", null, "static", -1 /* HOISTED */)
const _hoisted_3 = /*#__PURE__*/_createVNode("span", null, "static", -1 /* HOISTED */)
const _hoisted_4 = /*#__PURE__*/_createVNode("span", null, "static", -1 /* HOISTED */)
const _hoisted_5 = /*#__PURE__*/_createVNode("span", null, "static", -1 /* HOISTED */)
const _hoisted_6 = /*#__PURE__*/_createVNode("span", null, "static", -1 /* HOISTED */)
const _hoisted_7 = /*#__PURE__*/_createVNode("span", null, "static", -1 /* HOISTED */)

export function render(_ctx, _cache) {
  return (_openBlock(), _createBlock("div", null, [
    _hoisted_1,
    _hoisted_2,
    _hoisted_3,
    _hoisted_4,
    _createVNode("span", {
      id: _ctx.foo,
      class: "count"
    }, _toDisplayString(_ctx.message), 9 /* TEXT, PROPS */, ["id"]),
    _hoisted_5,
    _hoisted_6,
    _hoisted_7
  ]))
}
```

å®ƒå†…éƒ¨ä½¿ç”¨æ˜¯ä¸€ä¸ªå« hoistStatic æœºåˆ¶ï¼Œ å¬åå­—å°±çŸ¥é“å°±æ˜¯æŠŠé™æ€ä¸å˜çš„èŠ‚ç‚¹æå‡å‡ºå»ã€‚ å¤§å®¶å¯ä»¥çœ‹åˆ°è¿™é‡Œæ‰€æœ‰é™æ€ä¸ä¼šå˜çš„span éƒ½è¢«æ‹¿åˆ°äº† render functionä½“ä¹‹å¤–ï¼Œä¹Ÿå°±æ˜¯è¯´ä»–ä»¬ä¼šåœ¨ä½ åº”ç”¨å¯åŠ¨çš„æ—¶å€™åˆ›å»ºä¸€æ¬¡ã€‚

ç„¶åè¿™äº›è™šæ‹ŸèŠ‚ç‚¹åœ¨æ¯æ¬¡è¢«åˆ›å»ºçš„æ—¶å€™è¢«ä¸åœçš„å¤ç”¨ï¼Œé‚£åœ¨ä¸åœå¤ç”¨çš„æƒ…å†µä¸‹ä¹Ÿå°±è¡¨è¾¾å¦å¤–ä¸€ä¸ªä¿¡æ¯ä»–ä»¬å°±ä¸éœ€è¦è¢«ä¸åœçš„åˆ›å»ºæ–°çš„èŠ‚ç‚¹åœ¨éå†æ¯”å¯¹äº†ï¼Œè¿™æ ·åšæ˜¯æ¯«æ— æ„ä¹‰çš„ã€‚ é‚£è¿™åœ¨å¤§å‹é¡¹ç›®ä¸­ä¼˜åŒ–è¿è¡Œæ—¶çš„å†…å­˜å ç”¨æ˜¯å¾ˆæ˜æ˜¾çš„ã€‚

### æ›´å¥½çš„é€»è¾‘ç»„åˆæ–¹å¼

å¦‚æœä½ ç”¨è¿‡ Vue2 åˆšå¼€å§‹ä¸€å®šä¼šè¢«å®ƒ options API ç®€æ´çš„ä»£ç ç»„ç»‡æ–¹å¼æ‰€å¸å¼•ï¼Œä½†æ˜¯å½“ç»„ä»¶å¤æ‚åº¦æå‡åŸæœ‰çš„"ç®€æ´æ€§"åˆä¼šæˆä¸ºè´Ÿæ‹…ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸‹Vue3 åšäº†ä»€ä¹ˆæ”¹å˜ã€‚

Vue3 compostion API ç¤ºä¾‹ï¼š

```js
const app = {
    setup() {
      //data
     const count = ref(0);
     //computed
     const plusOne = computed(() => count.value + 1);
     //method
     const increname = () => count.value++;
     //watch
     watch(() => count.value * 2, v => console.log(v));
     //lifecycle
     onMounted(() => console.log('onmounted'));
     //æš´éœ²ç»™æ¨¡æ¿æˆ–æ¸²æŸ“å‡½æ•°
     return {
	count
     };
  }
}

```

è¿™ä¸ªç¤ºä¾‹ä»£ç ä¸­æœ‰ä¸€äº›æ–°çš„å‡½æ•°API, è¿™ä¸ªref  ä¼šåˆ›å»ºä¸€ä¸ªå€¼ï¼Œè¿™ä¸ªå€¼ä¼šåŒ…å«è¿™ä¸ªæ•°å­— 0 ã€‚è¿™ä¸ªå€¼å…¶å®å°±æ˜¯ä¸€ä¸ªwrapper åŒ…è£…å¯¹è±¡ï¼Œç„¶åä½ è¦å–åˆ°è¿™ä¸ªå€¼å°±é€šè¿‡count.value æ¥å–ã€‚ é‚£è¿™ä¸ªå¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿå°±æ˜¯å³ä½¿ä½ è¿™ä¸ªcount åŒ…å«æ˜¯ä¸€ä¸ªåŸå§‹ç±»å‹çš„å€¼ä½ ä¹Ÿå¯ä»¥æŠŠå®ƒåœ¨å‡½æ•°ä¹‹é—´ä¼ æ¥ä¼ å»ï¼Œä¼ æ¥ä¼ å»çš„åŒæ—¶æ¯å½“ä½ ç”¨è¿™ä¸ª .value æ¥å–å®ƒå€¼çš„æ—¶å€™ï¼Œè¿˜è¿˜ä¼šè¢«è¿½è¸ªä¾èµ–ã€‚ ç„¶åä½ åœ¨å»æ”¹è¿™ä¸ª .value çš„å€¼å®ƒåˆä¼šè§¦å‘æ›´æ–°ã€‚

ç„¶åä½ å¯ä»¥ç›´æ¥åˆ›å»ºä¸€ä¸ªè®¡ç®—å±æ€§ï¼Œè®¡ç®—å±æ€§è¿”å›çš„ä¹Ÿæ˜¯å€¼çš„åŒ…è£…ã€‚

ç„¶åæ–¹æ³•ä¹Ÿå¾ˆç®€å•å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä½ æŠŠå€¼ä¸€æ”¹è¿™å°±æ˜¯ä½ çš„æ–¹æ³•ã€‚

ç„¶åä½ å¯ä»¥watch ï¼Œwatch ä½ å»è®¡ç®—ä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼ï¼Œå½“è¿™ä¸ªå€¼å˜åŒ–å°±è§¦å‘å›è°ƒã€‚

è¿™äº›éƒ½è·ŸVue2 Options é€‰é¡¹ä¸€ä¸€å¯¹åº”çš„ï¼Œè¿™ä¸ªå°±æ˜¯data ã€è¿™ä¸ªå°±æ˜¯computed ã€è¿™ä¸ªå°±æ˜¯methodã€è¿™ä¸ªå°±æ˜¯watchã€ç„¶ålifecycleä¹Ÿæ˜¯ mounted ç›´æ¥è¿™æ ·æ³¨å…¥ã€‚

æœ€åä½ å¯ä»¥é€‰æ‹©æš´éœ²å“ªäº›ä¸œè¥¿ç»™ä½ çš„æ¨¡æ¿ï¼Œè¿™ä¸ªå°±è·Ÿä½ åœ¨data é‡Œé¢è¿”å›ä¸€ä¸ªå¯¹è±¡æ˜¯ä¸€æ ·çš„ã€‚ ä½ å¯ä»¥èƒ½ä¼šè§‰å¾—è¿™ä¸ªä¸å°±æ˜¯æŠŠVue2çš„é€‰é¡¹APIæ¢æˆäº†å‡½æ•°å—ï¼Ÿ åˆ°åº•æœ‰ä»€ä¹ˆå¥½å¤„ã€‚

æ€»ç»“å‡ ç‚¹ï¼š

1.**æ›´å¥½çš„TypeScript ç±»å‹æ¨æ–­æ”¯æŒ**

ä¸ºä»€ä¹ˆï¼Ÿ å› ä¸ºTS ä¸æ˜¯ä»¥ä½ ç»™æˆ‘ä¸€ä¸ªå¯¹è±¡æˆ‘æ ¹æ®ä½ å¯¹è±¡é‡Œé¢çš„ä¸€äº›å±æ€§æ¥æ¨å¯¼å®ƒå¦ä¸€äº›å±æ€§çš„å€¼ã€‚å®ƒä¸æ˜¯ä»¥è¿™æ ·ä¸€ä¸ªå‰æå»è®¾è®¡çš„ï¼Œä½†æ˜¯å¦‚æœä½ æ˜¯ä¸€äº›è¿™æ ·çš„ä»£ç ï¼ŒTS å¯¹äºå‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼çš„æ”¯æŒæ˜¯éå¸¸éå¸¸å¥½çš„ã€‚ä¹Ÿæ˜¯è¯´åœ¨æºç å†…éƒ¨è¿™ä¸ªå‡½æ•°æ¥å£çš„ç±»å‹å£°æ˜éƒ½å·²ç»å¸®ä½ åšå¥½äº†ï¼Œæ‰€ä»¥ä½ åœ¨å†™ä»£ç çš„æ—¶å€™è¿™ä¸ªå³æ˜¯JavaScriptä»£ç  ä¹Ÿæ˜¯TypeScript ä»£ç ã€‚  ä½ ç”¨TypeScript å»å†™è¿™ä¸ªè·Ÿä½ ç”¨JavaScriptå»å†™è¿™ä¸ªæ˜¯ä¸€æ¨¡ä¸€æ ·çš„ä½ ä¸éœ€è¦ä»»ä½•çš„æ‰‹åŠ¨ç±»å‹å£°æ˜ã€‚è€Œä¸”ä»–ç»™ä½ å®Œç¾çš„ç±»å‹æ¨å¯¼å®Œç¾çš„è‡ªåŠ¨è¡¥å…¨ã€‚

2.**æ›´çµæ´»çš„é€»è¾‘å¤ç”¨èƒ½åŠ›**

æˆ‘ä»¬æƒ³è¦è®©åŒä¸€å¥—é€»è¾‘è¦åœ¨å¤šä¸ªç»„ä»¶ä¹‹é—´å¤ç”¨ï¼ŒVue2.0 é‡Œé¢æœ‰å‡ ç§ä¸åŒçš„æ–¹æ¡ˆã€‚

minxin ä¾¦å¬é¼ æ ‡ä½ç½®ï¼š

```js
const mousePositionMixin = {
     data() {
      return {
	 x: 0,
	 y: 0
	}
     },
     mounted() {
        window.addEventListener('mousemove', this.updata);
     },
     destroyed() {
	window.addEventListener('mousemove', this.update);
     },
    methods: {
       updata(e) {
	 this.x = e.pageX;
	 this.y = e.pageY;
       }
    }
}

```

mixin å¾ˆç®€å•è·Ÿä½ å•ç‹¬å†™ä¸ªç»„ä»¶æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œä½ éœ€è¦æœ‰data éœ€è¦åœ¨ç»„ä»¶æŒ‚è½½çš„æ—¶å€™ç»‘å®šäº‹ä»¶ï¼Œéœ€è¦åœ¨ç»„ä»¶é”€æ¯çš„æ—¶å€™ç§»é™¤äº‹ä»¶ï¼Œéœ€è¦æœ‰ä¸ªupdateæ–¹æ³•æ›´æ–°æ•°æ®ã€‚  è™½ç„¶è¯´mixin å¾ˆç®€å•å¾ˆç›´è§‚ä½†æ˜¯ä½ ä¼šå‘ç°å½“ä½ mixinç”¨å¤ªå¤šçš„æ—¶å€™ï¼Œå¾ˆæ˜¾è€Œæ˜“è§çš„é—®é¢˜ã€‚ é¦–å…ˆå‘½åç©ºé—´å†²çªï¼Œä½ æ€ä¹ˆä¿è¯å¤šä¸ªmixin ä¸ä¼šæ°å¥½å ç”¨åŒä¸€ä¸ªå±æ€§ã€‚  ç„¶åæ¨¡æ¿æ•°æ®æ¥æºä¸æ¸…æ™°ã€‚

æ¯”å¦‚è¯´å½“ä½ å•ç‹¬ç”¨ç€ä¸€ä¸ªmixinçš„æ—¶å€™ä½ ä¼šçŸ¥é“ï¼Œx æ˜¯ä»å®ƒè¿™æ¥ï¼Œy æ˜¯ä»ä»–è¿™æ¥ã€‚ä½†æ˜¯ä½ mixin ä¸€å¤šçš„è¯ä½ æ˜¯ä¸ä¼šå£°æ˜é‚£ä¸ªå±æ€§æ˜¯ä»å“ªä¸ªmixinæ³¨å…¥çš„ã€‚ é‚£ä½ mixin ä¸€å¤šå°±ä¼šé€ æˆæ•°æ®æ¥æºä¸æ¸…æ™°çš„é—®é¢˜ã€‚

è¿˜æœ‰ä¸€ç§å¤ç”¨çš„æ–¹æ¡ˆé«˜é˜¶ç»„ä»¶(Higher-order Component)

```js
const listen = WithMousePosition({
    props:['x','y'],
    template:`<div>Mouse Position:x {{ x }} / y: {{ y }}</div>`
})
```

è¿™ä¸ªæˆ‘ä»¬åº”è¯¥åœ¨Vueé‡Œé¢ç”¨çš„æ¯”è¾ƒå°‘ï¼Œåœ¨reactä¸­ç”¨çš„æ¯”è¾ƒå¤šã€‚ é«˜é˜¶ç»„ä»¶å°±æ˜¯è¯´ç”¨ä¸€ä¸ªçˆ¶ç»„ä»¶å»æ‰¿è½½è¿™ä¸ªé€»è¾‘çš„è¿™ä¸ªå†…å®¹ã€‚ç„¶åè®©è¿™ä¸ªçˆ¶ç»„ä»¶æŠŠè¿™ä¸ªæœ€ç»ˆå¾—å‡ºçš„æ•°æ®ä»¥propsçš„å½¢å¼ä¼ é€’ç»™é‡Œé¢çš„å­ç»„ä»¶ã€‚  ç­‰äºè¯´ä½ æ¯æ¬¡è¦ç”¨åˆ°è¿™ä¸ªé€»è¾‘çš„æ—¶å€™å°±ç”¨å¤–é¢è¿™ä¸ªé«˜é˜¶ç»„ä»¶æŠŠä½ çœŸæ­£è¦å†™çš„ç»„ä»¶åŒ…ä¸€ä¸‹ã€‚ é‚£ä½ çœŸæ­£è¦å†™çš„ç»„ä»¶å°±ä»¥propsçš„å½¢å¼æ¥æ”¶å¤–é¢ä¼ è¿›æ¥çš„æ•°æ®ï¼Œåœ¨Vue2é‡Œé¢å¼•å…¥é«˜é˜¶ç»„ä»¶æ˜¯ä½œä¸ºmixinçš„ä¸€ä¸ªæ›¿ä»£å“çš„ã€‚

ä½†æ˜¯å®é™…ä¸Šä»–æ¯”mixinæ›´ç³Ÿç³•å½“ä½ å¤šä¸ªé«˜é˜¶ç»„ä»¶ä¸€èµ·ç”¨çš„æ—¶å€™ props å‘½åç©ºé—´ä¾ç„¶ä¼šæœ‰å†²çªï¼Œprops æ¥æºä¸æ¸…æ™°æˆ‘å¹¶ä¸çŸ¥é“props æ˜¯å“ªä¸ªé«˜é˜¶ç»„ä»¶ä¼ è¿›æ¥çš„ã€‚æœ€åé«˜é˜¶ç»„ä»¶åµŒçš„è¶Šå¤šé¢å¤–çš„ç»„ä»¶å®ä¾‹æ¶ˆè€—ä¹Ÿå°±è¶Šå¤šï¼Œè¿™å°±æ˜¯ä¸€ä¸ªæ— è°“çš„æ€§èƒ½æ¶ˆè€—ã€‚

è¿˜æœ‰ä¸€ä¸ªé€»è¾‘å¤ç”¨çš„åŠæ³•(Renderless Components) ä½œç”¨åŸŸæ’æ§½

```html
<mouse v-slot="{x,y}">
  Mouse Position: x {{ x }} / y {{ y }}
</mouse>
```

è¿™ä¸ªè·Ÿreact çš„Render Propsæ˜¯ç­‰åŒçš„æ¦‚å¿µï¼Œä½œç”¨åŸŸæ’æ§½è¿˜æ˜¯ç”¨ä¸€ä¸ªç»„ä»¶å»æ‰¿è½½é€»è¾‘ï¼Œä½†æ˜¯å®ƒæŠŠæ•°æ®ä¼ å›ç»™è°ƒç”¨è€…çš„æ–¹å¼æ˜¯é€šè¿‡ä»¥ä½œç”¨åŸŸæ’æ§½çš„æ–¹å¼ä¼ å›æ¥ã€‚ æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªmouse çš„ç»„ä»¶ï¼Œç»„ä»¶é‡Œé¢åŒ…å«äº†mouse çš„é€»è¾‘ï¼Œç„¶åå®ƒä¼šå»æ¸²æŸ“ä¸€ä¸ªdefault slot  ç„¶åæŠŠ xï¼Œy ä»¥å‚æ•°çš„å½¢å¼ä¼ é€’ç»™è¿™ä¸ªdefault slotã€‚

ä½œç”¨åŸŸæ’æ§½æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€»è¾‘å¤ç”¨æ–¹å¼ï¼Œå› ä¸ºä»–æ²¡æœ‰å‘½åç©ºé—´çš„å†²çªï¼Œæ•°æ®æ¥æºä¹Ÿæ¸…æ™°ï¼Œæ˜¯ä»å“ªä¸ªç»„ä»¶æ¥çš„ï¼Œæ€ä¹ˆæ³¨å…¥è¿›æ¥åˆ°ä½ çš„æ¨¡æ¿é‡Œçš„éƒ½å¾ˆæ¸…æ™°ã€‚ å”¯ä¸€çš„ç¼ºç‚¹å°±æ˜¯æœ‰é¢å¤–çš„ç»„ä»¶å®ä¾‹æ€§èƒ½æ¶ˆè€—ï¼Œå› ä¸ºä½ ä¾ç„¶ç”¨çš„æ˜¯ä»¥ç»„ä»¶ä¸ºæ‰¿è½½é€»è¾‘çš„å•å…ƒã€‚

å¦‚æœç”¨composition APIæ¥å†™ä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿ

```javascript
function useMousePosition(){
  const x = ref(0);
  const y = ref(0);

  const updata = e =>{
	x.value = e.pageX;
	y.value = e.pageY;
  }
 
 onMounted(() => { 
    window.addEventListener('mousemove', updata);
  })

 onUnmounted(() => {
    window.removeEventListener('mousemove', updata);
  })
 
  return {x, y}
}
```

æˆ‘ä»¬æ€ä¹ˆæ ·æŠŠè¿™ä¸ªé€»è¾‘æŠ½å‡ºæ¥ï¼Œæˆ‘ä»¬é¦–å…ˆä¼šå®šä¹‰ä¸¤ä¸ªå€¼xï¼Œyã€‚ ç„¶åå®šä¹‰ä¸€ä¸ªmethod æ–¹æ³• update æŠŠå®ƒæ•°æ®æ›´æ–°ä¸‹ï¼Œ ç„¶åæ³¨å…¥ onMountedã€onUnMountedçš„é’©å­ï¼Œæœ€åæˆ‘ä»¬æŠŠè¦æš´éœ²ç»™ç»„ä»¶çš„æ•°æ®å½“åšè¿”å›å€¼ç»™å®ƒè¿”å›å‡ºå»ã€‚è¿™æ ·æˆ‘ä»¬æ‰€æœ‰çš„é€»è¾‘éƒ½å¾ˆå¹²å‡€çš„æŠ½åœ¨äº†ä¸€ä¸ªå‡½æ•°é‡Œé¢ã€‚

ä½¿ç”¨çš„æ—¶å€™ä¹Ÿå¾ˆç®€å•ï¼š

```javascript
new Vue({
   template:`
     <div>
       Mouse Position: x {{ x }} / y {{ y }}
     </div>
	`
  setup(){
   const { x, y }  = useMousePosition();
      return{
	 x,
	 y,
      }
   }
});
```

æˆ‘ä»¬è°ƒç”¨useMousePositionçš„æ—¶å€™å°±ä¼šè·å¾—xï¼Œy ï¼Œç„¶åç›´æ¥ç»™å®ƒè¿”å›å‡ºå»åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ã€‚ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™æ ·æ²¡æœ‰å‘½åç©ºé—´çš„é—®é¢˜ï¼Œä½ å®Œå…¨å¯ä»¥åœ¨è§£æ„å‡ºæ¥çš„æ—¶å€™ç»™å®ƒé‡å‘½åï¼Œä¹Ÿå¾ˆæ¸…æ¥šä½ çš„xï¼Œy æ˜¯ä»å“ªä¸ªå‡½æ•°ä¸­æ¥çš„ã€‚ è€Œä¸”ä¹Ÿæ²¡æœ‰é¢å¤–çš„ç»„ä»¶æ€§èƒ½æ¶ˆè€—ã€‚ å¦‚æœå•ä»é€»è¾‘å¤ç”¨çš„è§’åº¦æ¥è®²å®ƒè§£å†³äº†æˆ‘ä»¬åˆšåˆšæ‰€æœ‰æ–¹æ¡ˆçš„é—®é¢˜ã€‚

è¿™æ˜¯Composition API åŸºäºå‡½æ•°è¿›è¡Œé€»è¾‘ä¸Šçš„å¤ç”¨ã€‚

**3. tree shaking æ›´å‹å¥½**

åœ¨ Vue 3 ä¸­ï¼Œå…¨å±€å’Œå†…éƒ¨ API éƒ½ç»è¿‡äº†é‡æ„å› æ­¤ï¼Œå…¨å±€ API åŒ…æ‹¬ï¼ˆreativeã€refã€computedã€watchã€nextTick...ï¼‰åœ¨å®ä¾‹å¼€å‘ä¸­ä½œä¸º ES æ¨¡å—é€šè¿‡ export å•ç‹¬å¼•å…¥ï¼Œè¿™ä½¿å¾—å®ƒä»¬å¯¹ tree-shaking éå¸¸å‹å¥½ã€‚æ²¡æœ‰è¢«ä½¿ç”¨çš„ API çš„ç›¸å…³ä»£ç å¯ä»¥åœ¨æœ€ç»ˆæ‰“åŒ…æ—¶è¢«ç§»é™¤ã€‚è¿™æ ·Vueæœ¬èº«çš„å°ºå¯¸å°±æ˜¯åŠ¨æ€çš„äº†ï¼Œä½ ä½¿ç”¨çš„åŠŸèƒ½è¶Šå°‘æ‰“åŒ…å‡ºæ¥çš„ bundler size ä¹Ÿå°±è¶Šå°ã€‚

åŒæ—¶ï¼ŒåŸºäºå‡½æ•° API æ‰€å†™çš„ä»£ç ä¹Ÿæœ‰æ›´å¥½çš„å‹ç¼©æ•ˆç‡ï¼Œå› ä¸ºæ‰€æœ‰çš„å‡½æ•°åå’Œ setup å‡½æ•°ä½“å†…éƒ¨çš„å˜é‡åéƒ½å¯ä»¥è¢«å‹ç¼©ï¼Œä½†å¯¹è±¡å’Œ class çš„å±æ€§/æ–¹æ³•åå´ä¸å¯ä»¥ã€‚

#### Vue3æ–°ç‰¹æ€§

> è¯¦ç»†æ–‡æ¡£ https://vue3js.cn/docs/zh/

composition API åŒ…å«

* ref & reactive
* æ–°çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°
* computed å’Œ watch
* Hooks

å…¶ä»–

* Tleport æ–°å†…ç½®ç»„ä»¶
* Suspense æ–°å†…ç½®ç»„ä»¶

#### script-setup ä¸ ref-sugar   ææ¡ˆ

> ref : RFCä¸­æ–‡
>
> [https://www.yuque.com/docs/share/33cc8c75-6a61-4187-ad1a-6c13ed8cd85c#lUBuB](https://www.yuque.com/docs/share/33cc8c75-6a61-4187-ad1a-6c13ed8cd85c#lUBuB)
>
> ref : RFCè‹±æ–‡
>
> [https://github.com/vuejs/rfcs/blob/script-setup/active-rfcs/0000-script-setup.md](https://github.com/vuejs/rfcs/blob/script-setup/active-rfcs/0000-script-setup.md)
>
> Ref-sugar ææ¡ˆçš„æ‰¹è¯„è§‚ç‚¹
>
> [https://zhuanlan.zhihu.com/p/287842109](https://zhuanlan.zhihu.com/p/287842109)





# JQuery





# ExtJs

2014å¹´æ¥è§¦è¿‡ï¼Œç›®å‰å·²ç»æ²¡è§å¤šå°‘é¡¹ç›®åœ¨ç”¨äº†ã€‚

